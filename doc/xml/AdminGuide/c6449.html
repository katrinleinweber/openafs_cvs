<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML
><HEAD
><TITLE
>Monitoring and Controlling Server Processes</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.7"><LINK
REL="HOME"
TITLE="AFS Administration Guide"
HREF="book1.html"><LINK
REL="UP"
TITLE="Managing File Server Machines"
HREF="p3023.html"><LINK
REL="PREVIOUS"
TITLE="Administering Server Machines"
HREF="c3025.html"><LINK
REL="NEXT"
TITLE="Managing Volumes"
HREF="c8420.html"></HEAD
><BODY
CLASS="chapter"
BGCOLOR="#FFFFFF"
TEXT="#000000"
LINK="#0000FF"
VLINK="#840084"
ALINK="#0000FF"
><DIV
CLASS="NAVHEADER"
><TABLE
SUMMARY="Header navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
>AFS Administration Guide: Version 3.6</TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="c3025.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
></TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="c8420.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><DIV
CLASS="chapter"
><H1
><A
NAME="HDRWQ142"
></A
>Chapter 4. Monitoring and Controlling Server Processes</H1
><P
>One of your most important responsibilities as a system administrator is ensuring that the processes on file server machines
  are running correctly. The BOS Server, which runs on every file server machine, relieves you of much of the responsibility by
  constantly monitoring the other AFS server processes on its machine. It can automatically restart processes that have failed,
  ordering the restarts to take interdependencies into account.</P
><P
>Because different file server machines run different combinations of processes, you must define which processes the BOS
  Server on each file server machine is to monitor (to learn how, see <A
HREF="c6449.html#HDRWQ154"
>Controlling and Checking Process
  Status</A
>).</P
><P
>It is sometimes necessary to take direct control of server process status before performing routine maintenance or
  correcting problems that the BOS Server cannot correct (such as problems with database replication or mutual authentication). At
  those times, you control process status through the BOS Server by issuing <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>bos</B
></SPAN
> commands.</P
><DIV
CLASS="sect1"
><H1
CLASS="sect1"
><A
NAME="HDRWQ143"
>Summary of Instructions</A
></H1
><P
>This chapter explains how to perform the following tasks by using the indicated commands:</P
><DIV
CLASS="informaltable"
><A
NAME="AEN6465"
></A
><TABLE
BORDER="0"
FRAME="void"
CLASS="CALSTABLE"
><COL><COL><TBODY
><TR
><TD
>Examine process status</TD
><TD
><SPAN
CLASS="bold"
><B
CLASS="emphasis"
>bos status</B
></SPAN
></TD
></TR
><TR
><TD
>Examine information from the <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>BosConfig file</B
></SPAN
> file</TD
><TD
><SPAN
CLASS="bold"
><B
CLASS="emphasis"
>bos status</B
></SPAN
> with <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>-long</B
></SPAN
> flag</TD
></TR
><TR
><TD
>Create a process instance</TD
><TD
><SPAN
CLASS="bold"
><B
CLASS="emphasis"
>bos create</B
></SPAN
></TD
></TR
><TR
><TD
>Stop a process</TD
><TD
><SPAN
CLASS="bold"
><B
CLASS="emphasis"
>bos stop</B
></SPAN
></TD
></TR
><TR
><TD
>Start a stopped process</TD
><TD
><SPAN
CLASS="bold"
><B
CLASS="emphasis"
>bos start</B
></SPAN
></TD
></TR
><TR
><TD
>Stop a process temporarily</TD
><TD
><SPAN
CLASS="bold"
><B
CLASS="emphasis"
>bos shutdown</B
></SPAN
></TD
></TR
><TR
><TD
>Start a temporarily stopped process</TD
><TD
><SPAN
CLASS="bold"
><B
CLASS="emphasis"
>bos startup</B
></SPAN
></TD
></TR
><TR
><TD
>Stop and immediately restart a process</TD
><TD
><SPAN
CLASS="bold"
><B
CLASS="emphasis"
>bos restart</B
></SPAN
></TD
></TR
><TR
><TD
>Stop and immediately restart all processes</TD
><TD
><SPAN
CLASS="bold"
><B
CLASS="emphasis"
>bos restart</B
></SPAN
> with <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>-bosserver</B
></SPAN
> flag</TD
></TR
><TR
><TD
>Examine BOS Server's restart times</TD
><TD
><SPAN
CLASS="bold"
><B
CLASS="emphasis"
>bos getrestart</B
></SPAN
></TD
></TR
><TR
><TD
>Set BOS Server's restart times</TD
><TD
><SPAN
CLASS="bold"
><B
CLASS="emphasis"
>bos setrestart</B
></SPAN
></TD
></TR
><TR
><TD
>Examine a log file</TD
><TD
><SPAN
CLASS="bold"
><B
CLASS="emphasis"
>bos getlog</B
></SPAN
></TD
></TR
><TR
><TD
>Execute a command remotely</TD
><TD
><SPAN
CLASS="bold"
><B
CLASS="emphasis"
>bos exec</B
></SPAN
></TD
></TR
></TBODY
></TABLE
></DIV
></DIV
><DIV
CLASS="sect1"
><H1
CLASS="sect1"
><A
NAME="HDRWQ145"
>Brief Descriptions of the AFS Server Processes</A
></H1
><P
>This section briefly describes the different server processes that can run on an AFS server machine. In cells with
    multiple server machines, not all processes necessarily run on all machines.</P
><P
>An AFS server process is referred to in one of three ways, depending on the context: <UL
><LI
><P
>The output from the <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>bos status</B
></SPAN
> command refers to a process by the name assigned
          when the <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>bos create</B
></SPAN
> command creates its entry in the <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>/usr/afs/local/BosConfig</B
></SPAN
> file. The name can differ from machine to machine, but it is easiest to
          maintain the cell if you assign the same name on all machines. The <SPAN
CLASS="emphasis"
><I
CLASS="emphasis"
>IBM AFS Quick Beginnings</I
></SPAN
> and the
          reference page for the <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>bos create</B
></SPAN
> command list the conventional names. Examples are
          <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>bosserver</B
></SPAN
>, <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>kaserver</B
></SPAN
>, and <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>vlserver</B
></SPAN
>.</P
></LI
><LI
><P
>The process listing produced by the standard <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>ps</B
></SPAN
> command generally matches the
          process's binary file. Examples of process binary files are <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>/usr/afs/bin/bosserver</B
></SPAN
>,
          <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>/usr/afs/bin/kaserver</B
></SPAN
>, and <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>/usr/afs/bin/vlserver</B
></SPAN
>.</P
></LI
><LI
><P
>In most contexts, including most references in the documentation, a process is referred to as (for example) the
          <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>Basic OverSeer (BOS) Server</B
></SPAN
>, the <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>Authentication Server</B
></SPAN
>,
          or the <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>Volume Location Server</B
></SPAN
>.</P
></LI
></UL
></P
><P
>The following sections specify each name for the process as well as some of the administrative tasks in which you use the
    process. For a more general description of the servers, see <A
HREF="c130.html#HDRWQ17"
>AFS Server Processes and the Cache
    Manager</A
>.</P
><DIV
CLASS="sect2"
><H2
CLASS="sect2"
><A
NAME="HDRWQ146"
>The bosserver Process: the Basic OverSeer Server</A
></H2
><P
>The <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>bosserver</B
></SPAN
> process, which runs on every AFS server machine, is the Basic OverSeer
      (BOS) Server responsible for monitoring the other AFS server processes running on its machine. If a process fails, the BOS
      Server can restart it automatically, without human intervention. It takes interdependencies into account when restarting a
      process that has multiple component processes (such as the <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>fs</B
></SPAN
> process described in <A
HREF="c6449.html#HDRWQ148"
>The fs Collection of Processes: the File Server, Volume Server and Salvager</A
>).</P
><P
>Because the BOS Server does not monitor or restart itself, it does not appear in the output from the <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>bos status</B
></SPAN
> command. It appears in the <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>ps</B
></SPAN
> command's output as
      <SAMP
CLASS="computeroutput"
>/usr/afs/bin/bosserver</SAMP
>.</P
><P
>As a system administrator, you contact the BOS Server when you issue <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>bos</B
></SPAN
> commands to
      perform the following kinds of tasks. <UL
><LI
><P
>Defining the processes for the BOS Server to monitor by creating entries in the <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>/usr/afs/local/BosConfig</B
></SPAN
> file as described in <A
HREF="c6449.html#HDRWQ154"
>Controlling and Checking
            Process Status</A
></P
></LI
><LI
><P
>Stopping and starting processes on the file server machines according to subsequent instructions in this
            chapter</P
></LI
><LI
><P
>Defining your cell's database server machines in the <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>/usr/afs/etc/CellServDB</B
></SPAN
> file
            as described in <A
HREF="c3025.html#HDRWQ118"
>Maintaining the Server CellServDB File</A
></P
></LI
><LI
><P
>Defining AFS server encryption keys in the <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>/usr/afs/etc/KeyFile</B
></SPAN
> file as described
            in <A
HREF="c20494.html"
>Managing Server Encryption Keys</A
>.</P
></LI
><LI
><P
>Granting system administrator privileges with respect to BOS Server, Volume Server, and Backup Server operations,
            by adding a user to the <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>/usr/afs/etc/UserList</B
></SPAN
> file as described in <A
HREF="c32432.html#HDRWQ592"
>Administering the UserList File</A
></P
></LI
><LI
><P
>Setting authorization checking requirements on a server machine as described in <A
HREF="c3025.html#HDRWQ123"
>Managing
            Authentication and Authorization Requirements</A
></P
></LI
></UL
></P
></DIV
><DIV
CLASS="sect2"
><H2
CLASS="sect2"
><A
NAME="HDRWQ147"
>The buserver Process: the Backup Server</A
></H2
><P
>The <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>buserver</B
></SPAN
> process, which runs on database server machines, is the Backup Server. It
      maintains information about Backup System configuration and operations in the Backup Database.</P
><P
>The process appears as <SAMP
CLASS="computeroutput"
>buserver</SAMP
> in the <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>bos status</B
></SPAN
>
      command's output, if the conventional name is assigned. It appears in the <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>ps</B
></SPAN
> command's output
      as <SAMP
CLASS="computeroutput"
>/usr/afs/bin/buserver</SAMP
>.</P
><P
>As a system administrator, you contact the Backup Server when you issue any <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>backup</B
></SPAN
>
      command that manipulates information in the Backup Database, including those that change Backup System configuration
      information, that dump data from volumes to permanent storage, or that restore data to AFS. See <A
HREF="c12776.html"
>Configuring the AFS Backup System</A
> and <A
HREF="c15383.html"
>Backing Up and Restoring AFS
      Data</A
>.</P
></DIV
><DIV
CLASS="sect2"
><H2
CLASS="sect2"
><A
NAME="HDRWQ148"
>The fs Collection of Processes: the File Server, Volume Server and Salvager</A
></H2
><P
>The <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>fs</B
></SPAN
> process, which runs on every file server machine, combines three component
      processes: File Server, Volume Server and Salvager. The three components perform independent functions, but are controlled as
      a single process for the following reasons. <UL
><LI
><P
>They all operate on the same data, namely files and directories stored in AFS volumes. Combining them as a single
            process enables them to coordinate their actions, never attempting simultaneous operations on the same data that can
            possibly corrupt it.</P
></LI
><LI
><P
>It enables the BOS Server to stop and restart the processes in the required order. When the File Server fails, the
            BOS Server stops the Volume Server and runs the Salvager to correct any corruption that resulted from the failure. (The
            Salvager runs only in this special circumstance or when you invoke it yourself by issuing the <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>bos
            salvage</B
></SPAN
> command as instructed in <A
HREF="c8420.html#HDRWQ232"
>Salvaging Volumes</A
>.) If only the Volume
            Server fails, the BOS Server can restart it without affecting the File Server or Salvager.</P
></LI
></UL
></P
><P
>The File Server component handles AFS data at the level of files and directories, manipulating file system elements as
      requested by application programs and the standard operating system commands. Its main duty is to deliver requested files to
      client machines and store them again on the server machine when the client is finished. It also maintains status and
      protection information about each file and directory. It runs continuously during normal operation.</P
><P
>The Volume Server component handles AFS data at the level of complete volumes rather than files and directories. In
      response to <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>vos</B
></SPAN
> commands, it creates, removes, moves, dumps and restores entire volumes,
      among other actions. It runs continuously during normal operation.</P
><P
>The Salvager component runs only after the failure of one of the other two processes. It checks the file system for
      internal consistency and repairs any errors it finds.</P
><P
>The process appears as <SAMP
CLASS="computeroutput"
>fs</SAMP
> in the <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>bos status</B
></SPAN
> command's
      output, if the conventional name is assigned. An auxiliary message reports the status of the File Server or Salvager
      component. See <A
HREF="c6449.html#HDRWQ158"
>Displaying Process Status and Information from the BosConfig File</A
>.</P
><P
>The component processes of the <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>fs</B
></SPAN
> process appear individually in the <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>ps</B
></SPAN
> command's output, as follows. There is no entry for the <SAMP
CLASS="computeroutput"
>fs</SAMP
> process
      itself. <UL
><LI
><P
><SAMP
CLASS="computeroutput"
>/usr/afs/bin/fileserver</SAMP
></P
></LI
><LI
><P
><SAMP
CLASS="computeroutput"
>/usr/afs/bin/volserver</SAMP
></P
></LI
><LI
><P
><SAMP
CLASS="computeroutput"
>/usr/afs/bin/salvager</SAMP
></P
></LI
></UL
></P
><P
>The Cache Manager contacts the File Server component on your behalf whenever you access data or status information in an
      AFS file or directory or issue file manipulation commands such as the UNIX <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>cp</B
></SPAN
> and <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>ls</B
></SPAN
> commands. You can contact the File Server directly by issuing <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>fs</B
></SPAN
>
      commands that perform the following functions <UL
><LI
><P
>Administering the ACL of any directory in the file system as described in <A
HREF="c31274.html"
>Managing Access
            Control Lists</A
></P
></LI
><LI
><P
>Installing new partitions for housing AFS volumes, in which case you must restart the <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>fs</B
></SPAN
> process for it to recognize the new partition; for instructions, see <A
HREF="c3025.html#HDRWQ130"
>Adding or Removing Disks and Partitions</A
></P
></LI
><LI
><P
>Creating and deleting volume mount points in the AFS filespace as described in <A
HREF="c8420.html#HDRWQ208"
>Mounting
            Volumes</A
></P
></LI
><LI
><P
>Setting volume quota and displaying information about the space used and available in a volume or partition as
            described in <A
HREF="c8420.html#HDRWQ234"
>Setting and Displaying Volume Quota and Current Size</A
></P
></LI
></UL
></P
><P
>You contact the Volume Server component when you issue <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>vos</B
></SPAN
> commands that manipulate
      volumes in any way--creating, removing, replicating, moving, renaming, converting to different formats, and salvaging. For
      instructions, see <A
HREF="c8420.html"
>Managing Volumes</A
>.</P
><P
>The Salvager normally runs automatically in case of a failure. You can also start it with the <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>bos
      salvage</B
></SPAN
> command as described in <A
HREF="c8420.html#HDRWQ232"
>Salvaging Volumes</A
>.</P
></DIV
><DIV
CLASS="sect2"
><H2
CLASS="sect2"
><A
NAME="HDRWQ149"
>The kaserver Process: the Authentication Server</A
></H2
><P
>The <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>kaserver</B
></SPAN
> process, which runs on database server machines, is the Authentication
      Server responsible for several aspects of AFS security. It verifies AFS user identity by requiring a password. It maintains
      all AFS server encryption keys and user passwords in the Authentication Database. The Authentication Server's Ticket Granting
      Service (TGS) module creates the shared secrets that AFS client and server processes use when establishing secure
      connections.</P
><P
>The process appears as <SAMP
CLASS="computeroutput"
>kaserver</SAMP
> in the <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>bos status</B
></SPAN
>
      command's output, if the conventional name is assigned. The <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>ka</B
></SPAN
> string stands for
      <SPAN
CLASS="emphasis"
><I
CLASS="emphasis"
>Kerberos Authentication</I
></SPAN
>, reflecting the fact that AFS's authentication protocols are based on Kerberos,
      which was originally developed at the Massachusetts Institute of Technology's Project Athena.</P
><P
>It appears in the <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>ps</B
></SPAN
> command's output as
      <SAMP
CLASS="computeroutput"
>/usr/afs/bin/kaserver</SAMP
>.</P
><P
>As a system administrator, you contact the Authentication Server when you issue <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>kas</B
></SPAN
>
      commands to perform the following kinds of tasks. <UL
><LI
><P
>Setting a user's password. Users normally change their own passwords, so you probably perform this task only
            creating a new user account as described in <A
HREF="c27596.html#HDRWQ502"
>Creating AFS User Accounts</A
> and <A
HREF="c27596.html#HDRWQ516"
>Changing AFS Passwords</A
>.</P
></LI
><LI
><P
>Setting the AFS server encryption key in the Authentication Database, which the TGS uses to seal server tickets;
            see <A
HREF="c20494.html"
>Managing Server Encryption Keys</A
>.</P
></LI
><LI
><P
>Granting or revoking system administrator privileges with respect to the Authentication Server as described in
            <A
HREF="c32432.html#HDRWQ589"
>Granting Privilege for kas Commands: the ADMIN Flag</A
>.</P
></LI
></UL
></P
></DIV
><DIV
CLASS="sect2"
><H2
CLASS="sect2"
><A
NAME="HDRWQ150"
>The ptserver Process: the Protection Server</A
></H2
><P
>The <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>ptserver</B
></SPAN
> process, which runs on database server machines, is the Protection Server.
      Its main responsibility is maintaining the Protection Database which contains user, machine, and group entries. The Protection
      Server allocates AFS IDs and maintains the mapping between them and names. The File Server consults the Protection Server when
      verifying that a user is authorized to perform a requested action.</P
><P
>The process appears as <SAMP
CLASS="computeroutput"
>ptserver</SAMP
> in the <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>bos status</B
></SPAN
>
      command's output, if the conventional name is assigned. It appears in the <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>ps</B
></SPAN
> command's output
      as <SAMP
CLASS="computeroutput"
>/usr/afs/bin/ptserver</SAMP
>.</P
><P
>As a system administrator, you contact the Protection Server when you issue <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>pts</B
></SPAN
>
      commands to perform the following kinds of tasks. <UL
><LI
><P
>Creating a new user, machine, or group entry in the Protection Database as described in <A
HREF="c29323.html"
>Administering the Protection Database</A
></P
></LI
><LI
><P
>Adding or removing group members or otherwise manipulating Protection Database entries as described in <A
HREF="c29323.html"
>Administering the Protection Database</A
></P
></LI
><LI
><P
>Granting or revoking system administrator privilege by changing the membership of the <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>system:administrators</B
></SPAN
> group as described in <A
HREF="c32432.html#HDRWQ586"
>Administering the
            system:administrators Group</A
></P
></LI
></UL
></P
></DIV
><DIV
CLASS="sect2"
><H2
CLASS="sect2"
><A
NAME="HDRWQ151"
>The runntp Process</A
></H2
><P
>The <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>runntp</B
></SPAN
> process, which runs on every server machine, is a controller program for the
      Network Time Protocol Daemon (NTPD), which synchronizes the hardware clocks on server machines. You need to run the <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>runntp</B
></SPAN
> process if you are not already running NTP or another time synchronization protocol on your
      server machines.</P
><P
>The clocks on database server machines need to be synchronized because AFS's distributed database technology (Ubik)
      works properly only when the clocks agree within a narrow range of variation (see <A
HREF="c3025.html#HDRWQ103"
>Configuring the
      Cell for Proper Ubik Operation</A
>). The clocks on file server machines need to be correct not only because the File Server
      sets modification time stamps on files, but because in the conventional configuration they serve as the time source for AFS
      client machines.</P
><P
>The process appears as <SAMP
CLASS="computeroutput"
>runntp</SAMP
> in the <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>bos status</B
></SPAN
>
      command's output, if the conventional name is assigned. It appears in the output from the <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>ps</B
></SPAN
>
      command as <SAMP
CLASS="computeroutput"
>/usr/afs/bin/runntp</SAMP
>. The <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>ps</B
></SPAN
> command's output also
      includes an entry called <SAMP
CLASS="computeroutput"
>ntpd</SAMP
>; its exact form depends on the arguments you provide to the
      <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>runntp</B
></SPAN
> command.</P
><P
>As a system administrator, you do not contact the NTPD directly once you have installed it according to the instructions
      in the <SPAN
CLASS="emphasis"
><I
CLASS="emphasis"
>IBM AFS Quick Beginnings</I
></SPAN
>.</P
></DIV
><DIV
CLASS="sect2"
><H2
CLASS="sect2"
><A
NAME="HDRWQ152"
>The upserver and upclient Processes: the Update Server</A
></H2
><P
>The Update Server has two separate parts, each of which runs on a different type of server machine. The <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>upserver</B
></SPAN
> process is the server portion of the Update Server. Its function depends on which edition of
      AFS you use: <UL
><LI
><P
>With both the United States and international editions, it runs on the binary distribution machine of each system
            type you use as a server machine, distributing the contents of each one's <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>/usr/afs/bin</B
></SPAN
>
            directory to the other server machines of that type. This guarantees that all machines have the same version of AFS
            binaries. (For a list of the binaries, see <A
HREF="c3025.html#HDRWQ84"
>Binaries in the /usr/afs/bin
            Directory</A
>.)</P
></LI
><LI
><P
>In you use the United States edition of AFS, it also runs on the cell's system control machine, distributing the
            contents of its <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>/usr/afs/etc</B
></SPAN
> directory to all the other server machines in order to
            synchronize the configuration files stored in that directory. (For a list of the configuration files, see <A
HREF="c3025.html#HDRWQ85"
>Common Configuration Files in the /usr/afs/etc Directory</A
>.)</P
></LI
></UL
></P
><P
>The <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>upclient</B
></SPAN
> process is the client portion of the Update Server, and like the server
      portion its function depends on the AFS edition in use. <UL
><LI
><P
>It runs on every server machine that is not a binary distribution machine, referencing the binary distribution
            machine of its system type as the source for updates to the binaries in the <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>/usr/afs/bin</B
></SPAN
> directory. The conventional process name to assign is <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>upclientbin</B
></SPAN
>.</P
></LI
><LI
><P
>If you use the United States edition of AFS, another instance of the process runs on every server machine except
            the system control machine. It references the system control machine as the source for updates to the common
            configuration files in the <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>/usr/afs/etc</B
></SPAN
> directory. The conventional process name to
            assign is <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>upclientetc</B
></SPAN
>.</P
></LI
></UL
></P
><P
>In output from the <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>bos status</B
></SPAN
> command, the server portion appears as
      <SAMP
CLASS="computeroutput"
>upserver</SAMP
> and the client portions as <SAMP
CLASS="computeroutput"
>upclientbin</SAMP
> and
      <SAMP
CLASS="computeroutput"
>upclientetc</SAMP
>, if the conventional names are assigned. In the output from the <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>ps</B
></SPAN
> command, the server portion appears as <SAMP
CLASS="computeroutput"
>/usr/afs/bin/upserver</SAMP
> and
      the client portions as /usr/afs/bin/upclient.</P
><P
>You do not contact the Update Server directly once you have installed it. It operates automatically whenever you use
      <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>bos</B
></SPAN
> commands to change the files that it distributes.</P
></DIV
><DIV
CLASS="sect2"
><H2
CLASS="sect2"
><A
NAME="HDRWQ153"
>The vlserver Process: the Volume Location Server</A
></H2
><P
>The <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>vlserver</B
></SPAN
> process, which runs on database server machines, is the Volume Location
      (VL) Server that automatically tracks which file server machines house each volume, making its location transparent to client
      applications.</P
><P
>The process appears as <SAMP
CLASS="computeroutput"
>vlserver</SAMP
> in the <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>bos status</B
></SPAN
>
      command's output, if the conventional name is assigned. It appears in the <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>ps</B
></SPAN
> command's output
      as <SAMP
CLASS="computeroutput"
>/usr/afs/bin/vlserver</SAMP
>.</P
><P
>As a system administrator, you contact the VL Server when you issue any <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>vos</B
></SPAN
> command
      that changes the status of a volume (it records the status changes in the VLDB).</P
></DIV
></DIV
><DIV
CLASS="sect1"
><H1
CLASS="sect1"
><A
NAME="HDRWQ154"
>Controlling and Checking Process Status</A
></H1
><P
>To define the AFS server processes that run on a server machine, use the <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>bos create</B
></SPAN
>
    command to create entries for them in the local <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>/usr/afs/local/BosConfig</B
></SPAN
> file. The BOS Server
    monitors the processes listed in the <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>BosConfig</B
></SPAN
> file that are marked with the
    <SAMP
CLASS="computeroutput"
>Run</SAMP
> status flag, and automatically attempts to restart them if they fail. After creating
    process entries, you use other commands from the <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>bos</B
></SPAN
> suite to stop and start processes or
    change the status flag as desired.</P
><P
>Never edit the <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>BosConfig</B
></SPAN
> file directly rather than using <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>bos</B
></SPAN
> commands. Similarly, it is not a good practice to run server processes without listing them in the
    <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>BosConfig</B
></SPAN
> file, or to stop them using process termination commands such as the UNIX <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>kill</B
></SPAN
> command.</P
><DIV
CLASS="sect2"
><H2
CLASS="sect2"
><A
NAME="Header_176"
>The Information in the BosConfig File</A
></H2
><P
>A process's entry in the <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>BosConfig</B
></SPAN
> file includes the following information:
      <UL
><LI
><P
>The process's name. The recommended conventional names are defined in both the <SPAN
CLASS="emphasis"
><I
CLASS="emphasis"
>IBM AFS Quick
            Beginnings</I
></SPAN
> and <A
HREF="c6449.html#HDRWQ161"
>Creating and Removing Processes</A
>. The name of a simple process
            usually matches the name of its binary file (for example, <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>ptserver</B
></SPAN
> for the Protection
            Server).</P
></LI
><LI
><P
>Its type, which is one of the following: <DIV
CLASS="variablelist"
><DL
><DT
><SPAN
CLASS="bold"
><B
CLASS="emphasis"
>simple</B
></SPAN
></DT
><DD
><P
>A process that runs independently of any other on the server machine. If several simple processes fail at
                    the same time, the BOS Server can restart them in any order. All standard AFS processes except the <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>fs</B
></SPAN
> process are simple.</P
></DD
><DT
><SPAN
CLASS="bold"
><B
CLASS="emphasis"
>fs</B
></SPAN
></DT
><DD
><P
>A process type reserved for the server process for which the conventional name is also <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>fs</B
></SPAN
>. This process combines three components: the File Server, the Volume Server, and the
                    Salvager.</P
></DD
><DT
><SPAN
CLASS="bold"
><B
CLASS="emphasis"
>cron</B
></SPAN
></DT
><DD
><P
>A process that runs at a defined time rather than continuously. There are no standard processes of this
                    type.</P
></DD
></DL
></DIV
></P
></LI
><LI
><P
>Its status flag, which tells the BOS Server whether it performs the following two actions with respect to the
            process: <UL
><LI
><P
>Start the process during BOS Server initialization</P
></LI
><LI
><P
>Restart the process if it (the process) fails</P
></LI
></UL
></P
><P
>The two possible values are <SAMP
CLASS="computeroutput"
>Run</SAMP
> (which directs the BOS Server to perform these
            actions) and <SAMP
CLASS="computeroutput"
>NotRun</SAMP
> (which directs the BOS Server to ignore the process). The BOS
            Server itself never changes the setting of this flag, even if the process fails repeatedly. Also, this flag is for
            internal use only; it does not appear in the <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>bos status</B
></SPAN
> command's output.</P
></LI
><LI
><P
>Its command parameters, which are the commands that the BOS Server runs to start the process. <UL
><LI
><P
>A simple processes has one: the complete pathname to its binary file</P
></LI
><LI
><P
>The <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>fs</B
></SPAN
> process has three: the complete pathnames to each of the three
                  component processes (<SPAN
CLASS="bold"
><B
CLASS="emphasis"
>/usr/afs/bin/fileserver</B
></SPAN
>, <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>/usr/afs/bin/volserver</B
></SPAN
>, and <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>/usr/afs/bin/salvager</B
></SPAN
>)</P
></LI
><LI
><P
>A cron process has two: the first the complete pathname to its binary file, the second the time at which the
                  BOS Server runs it</P
></LI
></UL
></P
></LI
></UL
></P
><P
>In addition to process definitions, the <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>BosConfig</B
></SPAN
> file also records automatic restart
      times for processes that have new binaries, and for all server processes including the BOS Server. See <A
HREF="c6449.html#HDRWQ171"
>Setting the BOS Server's Restart Times</A
>.</P
></DIV
><DIV
CLASS="sect2"
><H2
CLASS="sect2"
><A
NAME="HDRWQ155"
>How the BOS Server Uses the Information in the BosConfig File</A
></H2
><P
>Whenever the BOS Server starts or restarts, it reads the <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>BosConfig</B
></SPAN
> file to learn which
      processes it is to start and monitor. It transfers the information into kernel memory and does not read the <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>BosConfig</B
></SPAN
> file again until it next restarts. This implies that the BOS Server's memory state can change
      independently of the <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>BosConfig</B
></SPAN
> file. You can, for example, stop a process but leave its
      status flag in the <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>BosConfig</B
></SPAN
> file as <SAMP
CLASS="computeroutput"
>Run</SAMP
>, or start a process
      even though its status flag in the <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>BosConfig</B
></SPAN
> file is
      <SAMP
CLASS="computeroutput"
>NotRun</SAMP
>.</P
></DIV
><DIV
CLASS="sect2"
><H2
CLASS="sect2"
><A
NAME="HDRWQ156"
>About Starting and Stopping the Database Server Processes</A
></H2
><P
>When you start or stop a database server process (Authentication Server, Backup Server, Protection Server, or Volume
      Location Server) for more than a short time, you must follow the instructions in the <SPAN
CLASS="emphasis"
><I
CLASS="emphasis"
>IBM AFS Quick
      Beginnings</I
></SPAN
> for installing or removing a database server machine. Here is a summary of the tasks you must perform to
      preserve correct AFS functioning. <UL
><LI
><P
>Start or stop all four database server processes on that machine. All AFS server processes and the Cache Manager
            processes expect all four database server processes to be running on each machine listed in the <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>CellServDB</B
></SPAN
> file. There is no way to indicate in the file that a machine is running only some of
            the database server processes.</P
></LI
><LI
><P
>Add or remove the machine in the <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>/usr/afs/etc/CellServDB</B
></SPAN
> file on all server
            machines and the <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>/usr/vice/etc/CellServDB</B
></SPAN
> file on all client machines.</P
></LI
><LI
><P
>Restart the database server processes on the other database server machines to force an election of a new Ubik
            coordinator for each one.</P
></LI
></UL
></P
></DIV
><DIV
CLASS="sect2"
><H2
CLASS="sect2"
><A
NAME="HDRWQ157"
>About Starting and Stopping the Update Server</A
></H2
><P
>In the conventional cell configuration, one server machine of each system type acts as a binary distribution machine,
      running the server portion of the Update Server (<SPAN
CLASS="bold"
><B
CLASS="emphasis"
>upserver</B
></SPAN
> process) to distribute the contents
      of its <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>/usr/afs/bin</B
></SPAN
> directory. The other server machines of its system type run an instance
      of the Update Server client portion (by convention called <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>upclientbin</B
></SPAN
>) that references the
      binary distribution machine.</P
><P
>If you run the United States edition of AFS, it is conventional for the first server machine you install to act as the
      system control machine, running the server portion of the Update Server (<SPAN
CLASS="bold"
><B
CLASS="emphasis"
>upserver</B
></SPAN
> process) to
      distribute the contents of its <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>/usr/afs/etc</B
></SPAN
> directory. All other server machines run an
      instance of the Update Server client portion (by convention called <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>upclientetc</B
></SPAN
>) that
      references the system control machine.</P
><DIV
CLASS="note"
><BLOCKQUOTE
CLASS="note"
><P
><B
>Note: </B
>If you are using the international edition of AFS, do not use the Update Server to distribute the contents of the
        <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>/usr/afs/etc</B
></SPAN
> directory (you do not run a system control machine). Ignore all references to
        the process in this chapter.</P
></BLOCKQUOTE
></DIV
><P
>It is simplest not to move binary distribution or system control responsibilities to a different machine unless you
      completely decommission a machine that is currently serving in one of those roles. Running the Update Server usually imposes
      very little processing load. If you must move the functionality, perform the following related tasks. <UL
><LI
><P
>If you replace the system control machine, you must stop the <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>upclientetc</B
></SPAN
> process
            on every other server machine and define a new one that references the new system control machine.</P
></LI
><LI
><P
>If you replace a binary distribution machine, you must stop the <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>upclientbin</B
></SPAN
>
            process on every other server machine of its system type and define a new one that references the new binary
            distribution machine (unless you are no longer running any server machines of that system type).</P
></LI
></UL
></P
></DIV
></DIV
><DIV
CLASS="sect1"
><H1
CLASS="sect1"
><A
NAME="HDRWQ158"
>Displaying Process Status and Information from the BosConfig File</A
></H1
><P
>To display the status of the AFS server processes on a server machine, issue the <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>bos
    status</B
></SPAN
> command. Adding the <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>-long</B
></SPAN
> flag displays most of the information from each
    process's entry in the <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>BosConfig</B
></SPAN
> file, including its type and command parameters. It also
    displays a warning message if the mode bits on files and subdirectories in the <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>/usr/afs</B
></SPAN
>
    directory do not match the expected values.</P
><DIV
CLASS="sect2"
><H2
CLASS="sect2"
><A
NAME="HDRWQ159"
>To display the status of server processes and their BosConfig entries</A
></H2
><OL
TYPE="1"
><LI
><P
>Issue the <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>bos status</B
></SPAN
> command. <PRE
CLASS="programlisting"
>&#13;   % <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>bos status</B
></SPAN
> &#60;<VAR
CLASS="replaceable"
>machine name</VAR
>&#62;  [&#60;<VAR
CLASS="replaceable"
>server process name</VAR
>&#62;+]  [<SPAN
CLASS="bold"
><B
CLASS="emphasis"
>-long</B
></SPAN
>]
</PRE
></P
><P
>where <DIV
CLASS="variablelist"
><DL
><DT
><SPAN
CLASS="bold"
><B
CLASS="emphasis"
>stat</B
></SPAN
></DT
><DD
><P
>Is the shortest acceptable abbreviation of <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>status</B
></SPAN
>.</P
></DD
><DT
><SPAN
CLASS="bold"
><B
CLASS="emphasis"
>machine name</B
></SPAN
></DT
><DD
><P
>Specifies the file server machine for which to display process status.</P
></DD
><DT
><SPAN
CLASS="bold"
><B
CLASS="emphasis"
>server process name</B
></SPAN
></DT
><DD
><P
>Names each process for which to display status, using the name assigned when its entry was defined with the
                  <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>bos create</B
></SPAN
> command. Omit this argument to display the status of all server
                  processes.</P
></DD
><DT
><SPAN
CLASS="bold"
><B
CLASS="emphasis"
>-long</B
></SPAN
></DT
><DD
><P
>Displays, in addition to status, information from the process's entry in the <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>BosConfig</B
></SPAN
> file: its type, its status flag, its command parameters, the associated notifier
                  program, and so on.</P
></DD
></DL
></DIV
></P
></LI
></OL
><P
>The output includes an entry for each process and uses one of the following strings to indicate the process's status:
      <UL
><LI
><P
><SAMP
CLASS="computeroutput"
>currently running normally</SAMP
> indicates that the process is running and its status
            flag in the <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>BosConfig</B
></SPAN
> file is <SAMP
CLASS="computeroutput"
>Run</SAMP
>. For cron entries,
            this message indicates that the command is still scheduled to run, not necessarily that it is actually running when the
            <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>bos status</B
></SPAN
> command was issued.</P
></LI
><LI
><P
><SAMP
CLASS="computeroutput"
>temporarily enabled</SAMP
> indicates that the process is running but that its status
            flag in the <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>BosConfig</B
></SPAN
> file is <SAMP
CLASS="computeroutput"
>NotRun</SAMP
>. The most common
            reason is that a system administrator has used the <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>bos startup</B
></SPAN
> command to start the
            process.</P
></LI
><LI
><P
><SAMP
CLASS="computeroutput"
>temporarily disabled</SAMP
> indicates that the process is not running even though its
            status flag in the <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>BosConfig</B
></SPAN
> file is <SAMP
CLASS="computeroutput"
>Run</SAMP
>. The most
            common reasons are either that a system administrator has used the <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>bos shutdown</B
></SPAN
> command
            to stop the process or that the BOS Server ceased trying to restart the process after numerous failed attempts. In the
            latter case, a supplementary message appears: <SAMP
CLASS="computeroutput"
>stopped for too many errors</SAMP
>.</P
></LI
><LI
><P
>disabled indicates that the process is not running and that its status flag in the <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>BosConfig</B
></SPAN
> file is <SAMP
CLASS="computeroutput"
>NotRun</SAMP
>. The BOS Server is not monitoring the
            process. Only a system administrator can set the flag this way; the BOS Server never does.</P
></LI
></UL
></P
><P
>The output for the <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>fs</B
></SPAN
> process always includes a message marked
      <SAMP
CLASS="computeroutput"
>Auxiliary status</SAMP
>, which can be one of the following: <UL
><LI
><P
><SAMP
CLASS="computeroutput"
>file server running</SAMP
> indicates that the File Server and Volume Server components
            of the File Server process are running normally.</P
></LI
><LI
><P
><SAMP
CLASS="computeroutput"
>salvaging file system</SAMP
> indicates that the Salvager is running, which usually
            implies that the File Server and Volume Server are temporarily disabled. The BOS Server restarts them as soon as the
            Salvager is finished.</P
></LI
></UL
></P
><P
>The output for a cron process also includes an <SAMP
CLASS="computeroutput"
>Auxiliary status</SAMP
> message to report when
      the command is scheduled to run next; see the example that follows.</P
><P
>The output for any process can include the supplementary message <SAMP
CLASS="computeroutput"
>has core file</SAMP
> to
      indicate that at some point the process failed and generated a core file in the <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>/usr/afs/logs</B
></SPAN
>
      directory. In most cases, the BOS Server is able to restart the process and it is running.</P
><P
>The following example includes a user-defined cron entry called <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>backupusers</B
></SPAN
>:</P
><PRE
CLASS="programlisting"
>&#13;   % <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>bos status fs3.abc.com</B
></SPAN
>
   Instance kaserver, currently running normally.
   Instance ptserver, currently running normally.
   Instance vlserver, has core file, currently running normally.
   Instance buserver, currently running normally.
   Instance fs, currently running normally.
       Auxiliary status is: file server running.
   Instance upserver, currently running normally.
   Instance runntp, currently running normally.
   Instance backupusers, currently running normally.
       Auxiliary status is: run next at Mon Jun 7 02:00:00 1999.
</PRE
><P
>If you include the <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>-long</B
></SPAN
> flag to the <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>bos status</B
></SPAN
>
      command, a process's entry in the output includes the following additional information from the <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>BosConfig</B
></SPAN
> file: <UL
><LI
><P
>The process's type (<SAMP
CLASS="computeroutput"
>simple</SAMP
>, <SAMP
CLASS="computeroutput"
>fs</SAMP
>, or
            <SAMP
CLASS="computeroutput"
>cron</SAMP
>).</P
></LI
><LI
><P
>The day and time the process last started or restarted.</P
></LI
><LI
><P
>The number of <SAMP
CLASS="computeroutput"
>proc starts</SAMP
>, which is how many times the BOS Server has started or
            restarted the process since it started itself.</P
></LI
><LI
><P
>The <SAMP
CLASS="computeroutput"
>Last exit</SAMP
> time when the process (or one of the component processes in the
            <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>fs</B
></SPAN
> process) last terminated. This line does not appear if the process has not
            terminated since the BOS Server started.</P
></LI
><LI
><P
>The <SAMP
CLASS="computeroutput"
>Last error exit</SAMP
> time when the process (or one of the component processes in
            the <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>fs</B
></SPAN
> process) last failed due to an error. A further explanation such as
            <SAMP
CLASS="computeroutput"
>due to shutdown request</SAMP
> sometimes appears. This line does not appear if the process has
            not failed since the BOS Server started.</P
></LI
><LI
><P
>Each command that the BOS Server invokes to start the process, as specified by the <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>-cmd</B
></SPAN
> argument to the <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>bos create</B
></SPAN
> command.</P
></LI
><LI
><P
>The pathname of the notifier program that the BOS Server invokes when the process terminates (if any), as
            specified by the <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>-notifier</B
></SPAN
> argument to the <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>bos create</B
></SPAN
>
            command.</P
></LI
></UL
></P
><P
>In addition, if the BOS Server has found that the mode bits on certain files and directories under <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>/usr/afs</B
></SPAN
> deviate from what it expects, it prints the following warning message:</P
><PRE
CLASS="programlisting"
>&#13;   Bosserver process reports inappropriate access on server directories
</PRE
><P
>The expected protections for the directories and files in the <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>/usr/afs</B
></SPAN
> directory are as
      follows. A question mark indicates that the BOS Server does not check the mode bit. See the <SPAN
CLASS="emphasis"
><I
CLASS="emphasis"
>IBM AFS Quick
      Beginnings</I
></SPAN
> for more information about setting the protections on these files and directories.</P
><DIV
CLASS="informaltable"
><A
NAME="AEN7243"
></A
><TABLE
BORDER="0"
FRAME="void"
CLASS="CALSTABLE"
><COL><COL><TBODY
><TR
><TD
><SPAN
CLASS="bold"
><B
CLASS="emphasis"
>/usr/afs</B
></SPAN
></TD
><TD
><SAMP
CLASS="computeroutput"
>drwxr?xr-x</SAMP
></TD
></TR
><TR
><TD
><SPAN
CLASS="bold"
><B
CLASS="emphasis"
>/usr/afs/backup</B
></SPAN
></TD
><TD
><SAMP
CLASS="computeroutput"
>drwx???---</SAMP
></TD
></TR
><TR
><TD
><SPAN
CLASS="bold"
><B
CLASS="emphasis"
>/usr/afs/bin</B
></SPAN
></TD
><TD
><SAMP
CLASS="computeroutput"
>drwxr?xr-x</SAMP
></TD
></TR
><TR
><TD
><SPAN
CLASS="bold"
><B
CLASS="emphasis"
>/usr/afs/db</B
></SPAN
></TD
><TD
><SAMP
CLASS="computeroutput"
>drwx???---</SAMP
></TD
></TR
><TR
><TD
><SPAN
CLASS="bold"
><B
CLASS="emphasis"
>/usr/afs/etc</B
></SPAN
></TD
><TD
><SAMP
CLASS="computeroutput"
>drwxr?xr-x</SAMP
></TD
></TR
><TR
><TD
><SPAN
CLASS="bold"
><B
CLASS="emphasis"
>/usr/afs/etc/KeyFile</B
></SPAN
></TD
><TD
><SAMP
CLASS="computeroutput"
>-rw????---</SAMP
></TD
></TR
><TR
><TD
><SPAN
CLASS="bold"
><B
CLASS="emphasis"
>/usr/afs/etc/UserList</B
></SPAN
></TD
><TD
><SAMP
CLASS="computeroutput"
>-rw?????--</SAMP
></TD
></TR
><TR
><TD
><SPAN
CLASS="bold"
><B
CLASS="emphasis"
>/usr/afs/local</B
></SPAN
></TD
><TD
><SAMP
CLASS="computeroutput"
>drwx???---</SAMP
></TD
></TR
><TR
><TD
><SPAN
CLASS="bold"
><B
CLASS="emphasis"
>/usr/afs/logs</B
></SPAN
></TD
><TD
><SAMP
CLASS="computeroutput"
>drwxr?xr-x</SAMP
></TD
></TR
></TBODY
></TABLE
></DIV
><P
>The following illustrates the extended output for the <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>fs</B
></SPAN
> process running on the machine
      <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>fs3.abc.com</B
></SPAN
>:</P
><PRE
CLASS="programlisting"
>&#13;   % <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>bos status fs3.abc.com fs -long</B
></SPAN
>
   Instance fs, (type is fs), currently running normally.
       Auxiliary status is file server running
   Process last started at Mon May 3 8:29:19 1999 (3 proc starts)
   Last exit at Mon May 3 8:29:19 1999
   Last error exit at Mon May 3 8:29:19 1999, due to shutdown request
   Command 1 is '/usr/afs/bin/fileserver'
   Command 2 is '/usr/afs/bin/volserver'
   Command 3 is '/usr/afs/bin/salvager'
</PRE
></DIV
></DIV
><DIV
CLASS="sect1"
><H1
CLASS="sect1"
><A
NAME="HDRWQ161"
>Creating and Removing Processes</A
></H1
><P
>To start a new AFS server process on a server machine, issue the <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>bos create</B
></SPAN
> command,
    which creates an entry in the <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>/usr/afs/local/BosConfig</B
></SPAN
> file, sets the process's status flag to
    <SAMP
CLASS="computeroutput"
>Run</SAMP
> both in the file and in the BOS Server's memory, and starts it running immediately. The
    binary file for the new process must already be installed, by convention in the <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>/usr/afs/bin</B
></SPAN
>
    directory (see <A
HREF="c3025.html#HDRWQ111"
>Installing New Binaries</A
>).</P
><P
>To stop a process permanently, first issue the <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>bos stop</B
></SPAN
> command, which changes the
    process's status flag to <SAMP
CLASS="computeroutput"
>NotRun</SAMP
> in both the <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>BosConfig</B
></SPAN
> file and
    the BOS Server's memory; it is marked as <SAMP
CLASS="computeroutput"
>disabled</SAMP
> in the output from the <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>bos status</B
></SPAN
> command. If desired, issue the <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>bos delete</B
></SPAN
> command to remove
    the process's entry from the <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>BosConfig</B
></SPAN
> file; the process no longer appears in the <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>bos status</B
></SPAN
> command's output.</P
><DIV
CLASS="note"
><BLOCKQUOTE
CLASS="note"
><P
><B
>Note: </B
>If you are starting or stopping a database server process in the manner described in this section, follow the complete
      instructions in the <SPAN
CLASS="emphasis"
><I
CLASS="emphasis"
>IBM AFS Quick Beginnings</I
></SPAN
> for creating or removing a database server machine. If you
      run one database server process on a given machine, you must run them all; for more information, see <A
HREF="c6449.html#HDRWQ156"
>About Starting and Stopping the Database Server Processes</A
>. Similarly, if you are stopping the
      <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>upserver</B
></SPAN
> process on the system control machine or a binary distribution machine, you must
      complete the additional tasks described in <A
HREF="c6449.html#HDRWQ157"
>About Starting and Stopping the Update
      Server</A
>.</P
></BLOCKQUOTE
></DIV
><DIV
CLASS="sect2"
><H2
CLASS="sect2"
><A
NAME="HDRWQ162"
>To create and start a new process</A
></H2
><OL
TYPE="1"
><LI
><P
>Verify that you are authenticated as a user listed in the <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>/usr/afs/etc/UserList</B
></SPAN
>
          file. If necessary, issue the <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>bos listusers</B
></SPAN
> command, which is fully described in <A
HREF="c32432.html#HDRWQ593"
>To display the users in the UserList file</A
>. <PRE
CLASS="programlisting"
>&#13;   % <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>bos listusers</B
></SPAN
> &#60;<VAR
CLASS="replaceable"
>machine name</VAR
>&#62;
</PRE
></P
></LI
><LI
><P
><SPAN
CLASS="bold"
><B
CLASS="emphasis"
>(Optional)</B
></SPAN
> Verify that the process's binaries are installed in the <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>/usr/afs/bin</B
></SPAN
> directory on this machine. If necessary, login at the console or telnet to the machine
          and list the contents of the <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>/usr/afs/bin</B
></SPAN
> directory.</P
><P
>If the binaries are not present, install them on the binary distribution machine of the appropriate system type, and
          wait for the Update Server to copy them to this machine. For instructions, see <A
HREF="c3025.html#HDRWQ111"
>Installing New
          Binaries</A
>.</P
><PRE
CLASS="programlisting"
>&#13;   % <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>ls /usr/afs/bin</B
></SPAN
>
</PRE
></LI
><LI
><P
><A
NAME="LIWQ163"
></A
>Issue the <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>bos create</B
></SPAN
> command to create an entry in the
          <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>BosConfig</B
></SPAN
> file and start the process. <PRE
CLASS="programlisting"
>&#13;   % <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>bos create</B
></SPAN
> &#60;<VAR
CLASS="replaceable"
>machine name</VAR
>&#62; &#60;<VAR
CLASS="replaceable"
>server process name</VAR
>&#62;   \
             &#60;<VAR
CLASS="replaceable"
>server type</VAR
>&#62; &#60;<VAR
CLASS="replaceable"
>command lines</VAR
>&#62;+ [ <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>-notifier</B
></SPAN
> &#60;<VAR
CLASS="replaceable"
>Notifier program</VAR
>&#62;]
</PRE
></P
><P
>where <DIV
CLASS="variablelist"
><DL
><DT
><SPAN
CLASS="bold"
><B
CLASS="emphasis"
>cr</B
></SPAN
></DT
><DD
><P
>Is the shortest acceptable abbreviation of <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>create</B
></SPAN
>.</P
></DD
><DT
><SPAN
CLASS="bold"
><B
CLASS="emphasis"
>machine name</B
></SPAN
></DT
><DD
><P
>Specifies the file server machine on which to create the process.</P
></DD
><DT
><SPAN
CLASS="bold"
><B
CLASS="emphasis"
>server process name</B
></SPAN
></DT
><DD
><P
>Names the process to create and start. For simple processes, the conventional value is the name of the
                  process's binary file. It is best to use the same name on every server machine that runs the process. The
                  following is a list of the conventional names for simple and fs-type processes (there are no standard cron
                  processes). <UL
><LI
><P
><SPAN
CLASS="bold"
><B
CLASS="emphasis"
>buserver</B
></SPAN
> for the Backup Server</P
></LI
><LI
><P
><SPAN
CLASS="bold"
><B
CLASS="emphasis"
>fs</B
></SPAN
> for the process that combines the File Server, Volume Server, and
                        Salvager</P
></LI
><LI
><P
><SPAN
CLASS="bold"
><B
CLASS="emphasis"
>kaserver</B
></SPAN
> for the Authentication Server</P
></LI
><LI
><P
><SPAN
CLASS="bold"
><B
CLASS="emphasis"
>ptserver</B
></SPAN
> for the Protection Server</P
></LI
><LI
><P
><SPAN
CLASS="bold"
><B
CLASS="emphasis"
>runntp</B
></SPAN
> for the controller process for the Network Time Protocol
                        Daemon</P
></LI
><LI
><P
><SPAN
CLASS="bold"
><B
CLASS="emphasis"
>upclientbin</B
></SPAN
> for the client portion of the Update Server that
                        references the binary distribution machine of this machine's system type</P
></LI
><LI
><P
><SPAN
CLASS="bold"
><B
CLASS="emphasis"
>upclientetc</B
></SPAN
> for the client portion of the Update Server that
                        references the system control machine</P
></LI
><LI
><P
><SPAN
CLASS="bold"
><B
CLASS="emphasis"
>vlserver</B
></SPAN
> for the Volume Location (VL) Server</P
></LI
></UL
></P
></DD
><DT
><SPAN
CLASS="bold"
><B
CLASS="emphasis"
>server type</B
></SPAN
></DT
><DD
><P
>Defines the process's type. Choose one of the following values: <UL
><LI
><P
><SPAN
CLASS="bold"
><B
CLASS="emphasis"
>cron</B
></SPAN
> for a cron process</P
></LI
><LI
><P
><SPAN
CLASS="bold"
><B
CLASS="emphasis"
>fs</B
></SPAN
> for the process named <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>fs</B
></SPAN
></P
></LI
><LI
><P
><SPAN
CLASS="bold"
><B
CLASS="emphasis"
>simple</B
></SPAN
> for all other processes listed as acceptable values for the
                        server process name argument</P
></LI
></UL
></P
></DD
><DT
><SPAN
CLASS="bold"
><B
CLASS="emphasis"
>command lines</B
></SPAN
></DT
><DD
><P
>Specifies each command the BOS Server runs to start the process. Specify no more than six commands (which
                  can include the command's options, in which case the entire string is surrounded by double quotes); any additional
                  commands are ignored.</P
><P
>For a simple process, provide the complete pathname of the process's binary file on the local disk (for
                  example, <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>/usr/afs/bin/ptserver</B
></SPAN
> for the Protection Server). If including any of
                  the initialization command's options, surround the entire command in double quotes (<SPAN
CLASS="bold"
><B
CLASS="emphasis"
>"
                  "</B
></SPAN
>). The <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>upclient</B
></SPAN
> process has a required argument, and the commands for
                  all other processes take optional arguments.</P
><P
>For the <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>fs</B
></SPAN
> process, provide the complete pathname of the local disk binary
                  file for each of the component processes: <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>fileserver</B
></SPAN
>, <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>volserver</B
></SPAN
>, and <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>salvager</B
></SPAN
>, in that order. The standard
                  binary directory is <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>/usr/afs/bin</B
></SPAN
>. If including any of an initialization command's
                  options, surround the entire command in double quotes (<SPAN
CLASS="bold"
><B
CLASS="emphasis"
>" "</B
></SPAN
>).</P
><P
>For a <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>cron</B
></SPAN
> process, provide two parameters: <UL
><LI
><P
>The complete local disk pathname of either an executable file or a command from one of the AFS suites
                        (complete with all of the necessary arguments). Surround this parameter with double quotes (<SPAN
CLASS="bold"
><B
CLASS="emphasis"
>" "</B
></SPAN
>) if it contains spaces.</P
></LI
><LI
><P
>A specification of when the BOS Server executes the file or command indicated by the first parameter.
                        There are three acceptable values: <UL
><LI
><P
>The string <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>now</B
></SPAN
>, which directs the BOS Server to execute the
                              file or command immediately and only once. It is usually simpler to issue the command directly or
                              issue the <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>bos exec</B
></SPAN
> command.</P
></LI
><LI
><P
>A time of day. The BOS Server executes the file or command daily at the indicated time. Separate
                              the hours and minutes with a colon (<SPAN
CLASS="emphasis"
><I
CLASS="emphasis"
>hh</I
></SPAN
>:<SPAN
CLASS="emphasis"
><I
CLASS="emphasis"
>MM</I
></SPAN
>), and use either
                              24-hour format, or a value in the range from <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>1:00</B
></SPAN
> through <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>12:59</B
></SPAN
> with the addition of <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>am</B
></SPAN
> or <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>pm</B
></SPAN
>. For example, both <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>14:30</B
></SPAN
> and <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>"2:30 pm"</B
></SPAN
> indicate 2:30 in the afternoon. Surround this parameter with double
                              quotes (<SPAN
CLASS="bold"
><B
CLASS="emphasis"
>" "</B
></SPAN
>) if it contains a space.</P
></LI
><LI
><P
>A day of the week and time of day, separated by a space and surrounded with double quotes
                              (<SPAN
CLASS="bold"
><B
CLASS="emphasis"
>" "</B
></SPAN
>). The BOS Server executes the file or command weekly at the
                              indicated day and time. For the day, provide either the whole name or the first three letters, all in
                              lowercase letters (<SPAN
CLASS="bold"
><B
CLASS="emphasis"
>sunday</B
></SPAN
> or <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>sun</B
></SPAN
>,
                              <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>thursday</B
></SPAN
> or <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>thu</B
></SPAN
>, and so on). For the
                              time, use the same format as when specifying the time alone.</P
></LI
></UL
></P
></LI
></UL
></P
></DD
><DT
><SPAN
CLASS="bold"
><B
CLASS="emphasis"
>-notifier</B
></SPAN
></DT
><DD
><P
>Specifies the pathname of a program that the BOS Server runs when the process terminates. For more
                  information on notifier programs, see the <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>bos create</B
></SPAN
> command reference page in
                  the <SPAN
CLASS="emphasis"
><I
CLASS="emphasis"
>IBM AFS Administration Reference</I
></SPAN
>.</P
></DD
></DL
></DIV
></P
></LI
></OL
><P
>The following example defines and starts the Protection Server on the machine <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>db2.abc.com</B
></SPAN
>:</P
><PRE
CLASS="programlisting"
>&#13;   % <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>bos create db2.abc.com ptserver simple /usr/afs/bin/ptserver</B
></SPAN
>
</PRE
><P
>The following example defines and starts the <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>fs</B
></SPAN
> process on the machine <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>fs6.abc.com</B
></SPAN
>.</P
><PRE
CLASS="programlisting"
>&#13;   % <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>bos create fs6.abc.com fs fs /usr/afs/bin/fileserver</B
></SPAN
>   \
        <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>/usr/afs/bin/volserver /usr/afs/bin/salvager</B
></SPAN
>
</PRE
><P
>The following example defines and starts a cron process called <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>backupuser</B
></SPAN
> process on
      the machine <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>fs3.abc.com</B
></SPAN
>, scheduling it to run each day at 3:00 a.m.</P
><PRE
CLASS="programlisting"
>&#13;   % <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>bos create fs3.abc.com backupuser cron  "/usr/afs/bin/vos backupsys -prefix user -local" 3:00</B
></SPAN
>
</PRE
></DIV
><DIV
CLASS="sect2"
><H2
CLASS="sect2"
><A
NAME="Header_184"
>To stop a process and remove it from the BosConfig file</A
></H2
><OL
TYPE="1"
><LI
><P
>Verify that you are authenticated as a user listed in the <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>/usr/afs/etc/UserList</B
></SPAN
>
          file. If necessary, issue the <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>bos listusers</B
></SPAN
> command, which is fully described in <A
HREF="c32432.html#HDRWQ593"
>To display the users in the UserList file</A
>. <PRE
CLASS="programlisting"
>&#13;   % <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>bos listusers</B
></SPAN
> &#60;<VAR
CLASS="replaceable"
>machine name</VAR
>&#62;
</PRE
></P
></LI
><LI
><P
><A
NAME="LIPROC-STOP"
></A
>Issue the <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>bos stop</B
></SPAN
> command to change each process's
          status flag in the <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>BosConfig</B
></SPAN
> file to <SAMP
CLASS="computeroutput"
>NotRun</SAMP
> and to stop
          it. You must issue this command even for cron processes that you wish to remove from the <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>BosConfig</B
></SPAN
> file, even though they do not run continuously. For a detailed description of this
          command, see <A
HREF="c6449.html#HDRWQ165"
>To stop a process by changing its status to
          <SAMP
CLASS="computeroutput"
>NotRun</SAMP
></A
>. <PRE
CLASS="programlisting"
>&#13;   % <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>bos stop</B
></SPAN
> &#60;<VAR
CLASS="replaceable"
>machine name</VAR
>&#62; &#60;<VAR
CLASS="replaceable"
>server process name</VAR
>&#62;+ [<SPAN
CLASS="bold"
><B
CLASS="emphasis"
>-wait</B
></SPAN
>]
</PRE
></P
></LI
><LI
><P
><A
NAME="LIPROC-DEL"
></A
>Issue the <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>bos delete</B
></SPAN
> command to remove each process from
          the <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>BosConfig</B
></SPAN
> file. <PRE
CLASS="programlisting"
>&#13;   % <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>bos delete</B
></SPAN
> &#60;<VAR
CLASS="replaceable"
>machine name</VAR
>&#62; &#60;<VAR
CLASS="replaceable"
>server process name</VAR
>&#62;+
</PRE
></P
><P
>where <DIV
CLASS="variablelist"
><DL
><DT
><SPAN
CLASS="bold"
><B
CLASS="emphasis"
>d</B
></SPAN
></DT
><DD
><P
>Is the shortest acceptable abbreviation of <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>delete</B
></SPAN
>.</P
></DD
><DT
><SPAN
CLASS="bold"
><B
CLASS="emphasis"
>machine name</B
></SPAN
></DT
><DD
><P
>Specifies the server machine on which to remove processes from the <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>BosConfig</B
></SPAN
> file.</P
></DD
><DT
><SPAN
CLASS="bold"
><B
CLASS="emphasis"
>server process name</B
></SPAN
></DT
><DD
><P
>Names each process entry to remove from the <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>BosConfig</B
></SPAN
> file. Provide the
                  same names as in Step <A
HREF="c6449.html#LIPROC-STOP"
>2</A
>.</P
></DD
></DL
></DIV
></P
></LI
></OL
></DIV
></DIV
><DIV
CLASS="sect1"
><H1
CLASS="sect1"
><A
NAME="HDRWQ164"
>Stopping and Starting Processes Permanently</A
></H1
><P
>To stop a process so that the BOS Server no longer attempts to monitor it, issue the <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>bos
    stop</B
></SPAN
> command. The process's status flag is set to <SAMP
CLASS="computeroutput"
>NotRun</SAMP
> in both the BOS Server's
    memory and in the <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>BosConfig</B
></SPAN
> file. The process does not run again until you issue the <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>bos start</B
></SPAN
> command, which sets its status flag back to <SAMP
CLASS="computeroutput"
>Run</SAMP
> in both the
    BOS Server's memory and in the <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>BosConfig</B
></SPAN
> file. (You can also use the <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>bos
    startup</B
></SPAN
> command to start the process again without changing its status flag in the <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>BosConfig</B
></SPAN
> file; see <A
HREF="c6449.html#HDRWQ167"
>Stopping and Starting Processes Temporarily</A
>.)</P
><P
>There is no entry for the BOS Server in the <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>BosConfig</B
></SPAN
> file, so the <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>bos stop</B
></SPAN
> and <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>bos start</B
></SPAN
> commands do not control it. To stop and
    immediately restart the BOS Server along with all other processes, use the <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>-bosserver</B
></SPAN
> flag to
    the <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>bos restart</B
></SPAN
> command as described in <A
HREF="c6449.html#HDRWQ170"
>Stopping and Immediately
    Restarting Processes</A
>.</P
><DIV
CLASS="note"
><BLOCKQUOTE
CLASS="note"
><P
><B
>Note: </B
>If you are starting or stopping a database server process in the manner described in this section, follow the complete
      instructions in the <SPAN
CLASS="emphasis"
><I
CLASS="emphasis"
>IBM AFS Quick Beginnings</I
></SPAN
> for creating or removing a database server machine. If you
      run one database server process on a given machine, you must run them all; for more information, see <A
HREF="c6449.html#HDRWQ156"
>About Starting and Stopping the Database Server Processes</A
>. Similarly, if you are stopping the
      <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>upserver</B
></SPAN
> process on the system control machine or a binary distribution machine, you must
      complete the additional tasks described in <A
HREF="c6449.html#HDRWQ157"
>About Starting and Stopping the Update
      Server</A
>.</P
></BLOCKQUOTE
></DIV
><DIV
CLASS="sect2"
><H2
CLASS="sect2"
><A
NAME="HDRWQ165"
>To stop a process by changing its status to NotRun</A
></H2
><OL
TYPE="1"
><LI
><P
>Verify that you are authenticated as a user listed in the <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>/usr/afs/etc/UserList</B
></SPAN
>
          file. If necessary, issue the <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>bos listusers</B
></SPAN
> command, which is fully described in <A
HREF="c32432.html#HDRWQ593"
>To display the users in the UserList file</A
>. <PRE
CLASS="programlisting"
>&#13;   % <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>bos listusers</B
></SPAN
> &#60;<VAR
CLASS="replaceable"
>machine name</VAR
>&#62;
</PRE
></P
></LI
><LI
><P
>Issue the <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>bos stop</B
></SPAN
> command to stop each process and set its status flag to
          <SAMP
CLASS="computeroutput"
>NotRun</SAMP
> in the <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>BosConfig</B
></SPAN
> file and the BOS Server's
          memory. <PRE
CLASS="programlisting"
>&#13;   % <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>bos stop</B
></SPAN
> &#60;<VAR
CLASS="replaceable"
>machine name</VAR
>&#62; &#60;<VAR
CLASS="replaceable"
>server process name</VAR
>&#62;+ [<SPAN
CLASS="bold"
><B
CLASS="emphasis"
>-wait</B
></SPAN
>]
</PRE
></P
><P
>where <DIV
CLASS="variablelist"
><DL
><DT
><SPAN
CLASS="bold"
><B
CLASS="emphasis"
>sto</B
></SPAN
></DT
><DD
><P
>Is the shortest acceptable abbreviation of <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>stop</B
></SPAN
>.</P
></DD
><DT
><SPAN
CLASS="bold"
><B
CLASS="emphasis"
>machine name</B
></SPAN
></DT
><DD
><P
>Specifies the server machine on which to stop the process.</P
></DD
><DT
><SPAN
CLASS="bold"
><B
CLASS="emphasis"
>server process name</B
></SPAN
></DT
><DD
><P
>Names each process to stop, using the name assigned when its entry was defined with the <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>bos create</B
></SPAN
> command.</P
></DD
><DT
><SPAN
CLASS="bold"
><B
CLASS="emphasis"
>-wait</B
></SPAN
></DT
><DD
><P
>Delays the return of the command shell prompt until all specified processes have stopped. If you omit the
                  flag, the prompt returns almost immediately, even if all processes are not yet stopped.</P
></DD
></DL
></DIV
></P
></LI
></OL
></DIV
><DIV
CLASS="sect2"
><H2
CLASS="sect2"
><A
NAME="HDRWQ166"
>To start processes by changing their status flags to Run</A
></H2
><OL
TYPE="1"
><LI
><P
>Verify that you are listed in the <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>/usr/afs/etc/UserList</B
></SPAN
> file. If necessary, issue
          the <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>bos listusers</B
></SPAN
> command, which is fully described in <A
HREF="c32432.html#HDRWQ593"
>To
          display the users in the UserList file</A
>. <PRE
CLASS="programlisting"
>&#13;   % <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>bos listusers</B
></SPAN
> &#60;<VAR
CLASS="replaceable"
>machine name</VAR
>&#62;
</PRE
></P
></LI
><LI
><P
><A
NAME="LIPROC-START"
></A
>Issue the <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>bos start</B
></SPAN
> command to change each process's
          status flag to <SAMP
CLASS="computeroutput"
>Run</SAMP
> in both the <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>BosConfig</B
></SPAN
> file and the
          BOS Server's memory and to start it. <PRE
CLASS="programlisting"
>&#13;   %  <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>bos start</B
></SPAN
> &#60;<VAR
CLASS="replaceable"
>machine name</VAR
>&#62; &#60;<VAR
CLASS="replaceable"
>server process name</VAR
>&#62;+
</PRE
></P
><P
>where <DIV
CLASS="variablelist"
><DL
><DT
><SPAN
CLASS="bold"
><B
CLASS="emphasis"
>start</B
></SPAN
></DT
><DD
><P
>Must be typed in full.</P
></DD
><DT
><SPAN
CLASS="bold"
><B
CLASS="emphasis"
>machine name</B
></SPAN
></DT
><DD
><P
>Specifies the server machine on which to start running each process.</P
></DD
><DT
><SPAN
CLASS="bold"
><B
CLASS="emphasis"
>server process name</B
></SPAN
></DT
><DD
><P
>Specifies each process to start on machine name. Use the name assigned to the process at creation.</P
></DD
></DL
></DIV
></P
></LI
></OL
></DIV
></DIV
><DIV
CLASS="sect1"
><H1
CLASS="sect1"
><A
NAME="HDRWQ167"
>Stopping and Starting Processes Temporarily</A
></H1
><P
>It is sometimes necessary to halt a process temporarily (for example, to make slight configuration changes or to perform
    maintenance). The commands described in this section change a process's status in the BOS Server's memory only; the effect is
    immediate and lasts until you change the memory state again (or until the BOS Server restarts, at which time it starts the
    process according to its entry in the <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>BosConfig</B
></SPAN
> file).</P
><P
>To stop a process temporarily by changing its status flag in BOS Server memory to <SAMP
CLASS="computeroutput"
>NotRun</SAMP
>,
    use the <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>bos shutdown</B
></SPAN
> command. To restart a stopped process by changing its status flag in the
    BOS Server's memory to <SAMP
CLASS="computeroutput"
>Run</SAMP
>, use the <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>bos startup</B
></SPAN
> command. The
    process starts regardless of its status flag in the <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>BosConfig</B
></SPAN
> file. You can also use the
    <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>bos startup</B
></SPAN
> command to start all processes marked with status flag
    <SAMP
CLASS="computeroutput"
>Run</SAMP
> in the <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>BosConfig</B
></SPAN
> file, as described in the following
    instructions.</P
><P
>Because the <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>bos startup</B
></SPAN
> command starts a process without changing it status flag in the
    <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>BosConfig</B
></SPAN
> file, it is useful for testing a server process without enabling it permanently. To
    stop and start processes by changing their status flags in the <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>BosConfig</B
></SPAN
> file, see <A
HREF="c6449.html#HDRWQ164"
>Stopping and Starting Processes Permanently</A
>; to stop and immediately restart a process, see <A
HREF="c6449.html#HDRWQ170"
>Stopping and Immediately Restarting Processes</A
>.</P
><DIV
CLASS="note"
><BLOCKQUOTE
CLASS="note"
><P
><B
>Note: </B
>Do not temporarily stop a database server process on all machines at once. Doing so makes the database completely
      unavailable.</P
></BLOCKQUOTE
></DIV
><DIV
CLASS="sect2"
><H2
CLASS="sect2"
><A
NAME="HDRWQ168"
>To stop processes temporarily</A
></H2
><OL
TYPE="1"
><LI
><P
>Verify that you are listed in the <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>/usr/afs/etc/UserList</B
></SPAN
> file. If necessary, issue
          the <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>bos listusers</B
></SPAN
> command, which is fully described in <A
HREF="c32432.html#HDRWQ593"
>To
          display the users in the UserList file</A
>. <PRE
CLASS="programlisting"
>&#13;   % <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>bos listusers</B
></SPAN
> &#60;<VAR
CLASS="replaceable"
>machine name</VAR
>&#62;
</PRE
></P
></LI
><LI
><P
><A
NAME="LIWQ169"
></A
>Issue the <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>bos shutdown</B
></SPAN
> command to stop each process by
          changing its status flag in the BOS Server's memory to <SAMP
CLASS="computeroutput"
>NotRun</SAMP
>. <PRE
CLASS="programlisting"
>&#13;   % <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>bos shutdown</B
></SPAN
> &#60;<VAR
CLASS="replaceable"
>machine name</VAR
>&#62; [&#60;<VAR
CLASS="replaceable"
>instances</VAR
>&#62;+] [<SPAN
CLASS="bold"
><B
CLASS="emphasis"
>-wait</B
></SPAN
>]
</PRE
></P
><P
>where <DIV
CLASS="variablelist"
><DL
><DT
><SPAN
CLASS="bold"
><B
CLASS="emphasis"
>sh</B
></SPAN
></DT
><DD
><P
>Is the shortest acceptable abbreviation of <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>shutdown</B
></SPAN
>.</P
></DD
><DT
><SPAN
CLASS="bold"
><B
CLASS="emphasis"
>machine name</B
></SPAN
></DT
><DD
><P
>Specifies the server machine on which to stop processes temporarily.</P
></DD
><DT
><SPAN
CLASS="bold"
><B
CLASS="emphasis"
>instances</B
></SPAN
></DT
><DD
><P
>Specifies each process to stop temporarily. Use the name assigned to the process at creation.</P
></DD
><DT
><SPAN
CLASS="bold"
><B
CLASS="emphasis"
>-wait</B
></SPAN
></DT
><DD
><P
>Delays the return of the command shell prompt until all specified processes have actually stopped. If you
                  omit the flag, the prompt returns almost immediately, even if all processes are not yet stopped.</P
></DD
></DL
></DIV
></P
></LI
></OL
></DIV
><DIV
CLASS="sect2"
><H2
CLASS="sect2"
><A
NAME="Header_190"
>To start all stopped processes that have status flag Run in the BosConfig file</A
></H2
><OL
TYPE="1"
><LI
><P
>Verify that you are listed in the <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>/usr/afs/etc/UserList</B
></SPAN
> file. If necessary, issue
          the <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>bos listusers</B
></SPAN
> command, which is fully described in <A
HREF="c32432.html#HDRWQ593"
>To
          display the users in the UserList file</A
>. <PRE
CLASS="programlisting"
>&#13;   % <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>bos listusers</B
></SPAN
> &#60;<VAR
CLASS="replaceable"
>machine name</VAR
>&#62;
</PRE
></P
></LI
><LI
><P
>Issue the <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>bos startup</B
></SPAN
> command to start each process on a machine that has status
          flag <SAMP
CLASS="computeroutput"
>Run</SAMP
> in the <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>BosConfig</B
></SPAN
> file by changing its status
          flag in the BOS Server's memory from <SAMP
CLASS="computeroutput"
>NotRun</SAMP
> to <SAMP
CLASS="computeroutput"
>Run</SAMP
>.
          <PRE
CLASS="programlisting"
>&#13;   % <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>bos startup</B
></SPAN
> &#60;<VAR
CLASS="replaceable"
>machine name</VAR
>&#62;
</PRE
></P
><P
>where <DIV
CLASS="variablelist"
><DL
><DT
><SPAN
CLASS="bold"
><B
CLASS="emphasis"
>startup</B
></SPAN
></DT
><DD
><P
>Must be typed in full.</P
></DD
><DT
><SPAN
CLASS="bold"
><B
CLASS="emphasis"
>machine name</B
></SPAN
></DT
><DD
><P
>Specifies the server machine on which you wish to start all processes that have status flag
                  <SAMP
CLASS="computeroutput"
>Run</SAMP
> in the <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>BosConfig</B
></SPAN
> file.</P
></DD
></DL
></DIV
></P
></LI
></OL
></DIV
><DIV
CLASS="sect2"
><H2
CLASS="sect2"
><A
NAME="Header_191"
>To start specific processes</A
></H2
><OL
TYPE="1"
><LI
><P
>Verify that you are listed in the <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>/usr/afs/etc/UserList</B
></SPAN
> file. If necessary, issue
          the <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>bos listusers</B
></SPAN
> command, which is fully described in <A
HREF="c32432.html#HDRWQ593"
>To
          display the users in the UserList file</A
>. <PRE
CLASS="programlisting"
>&#13;   % <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>bos listusers</B
></SPAN
> &#60;<VAR
CLASS="replaceable"
>machine name</VAR
>&#62;
</PRE
></P
></LI
><LI
><P
>Issue the <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>bos startup</B
></SPAN
> command to start specific processes by changing their status
          flags in the BOS Server's memory to <SAMP
CLASS="computeroutput"
>Run</SAMP
> without changing their status flags in the
          <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>BosConfig</B
></SPAN
> file. <PRE
CLASS="programlisting"
>&#13;   % <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>bos startup</B
></SPAN
> &#60;<VAR
CLASS="replaceable"
>machine name</VAR
>&#62; &#60;<VAR
CLASS="replaceable"
>instances</VAR
>&#62;+
</PRE
></P
><P
>where <DIV
CLASS="variablelist"
><DL
><DT
><SPAN
CLASS="bold"
><B
CLASS="emphasis"
>startup</B
></SPAN
></DT
><DD
><P
>Must be typed in full.</P
></DD
><DT
><SPAN
CLASS="bold"
><B
CLASS="emphasis"
>machine name</B
></SPAN
></DT
><DD
><P
>Names the server machine on which to start processes.</P
></DD
><DT
><SPAN
CLASS="bold"
><B
CLASS="emphasis"
>instances</B
></SPAN
></DT
><DD
><P
>Specifies each process to start. Use the name assigned to the process at creation.</P
></DD
></DL
></DIV
></P
></LI
></OL
></DIV
></DIV
><DIV
CLASS="sect1"
><H1
CLASS="sect1"
><A
NAME="HDRWQ170"
>Stopping and Immediately Restarting Processes</A
></H1
><P
>Although by default the BOS Server checks each day for new installed binary files and restarts the associated processes,
    it is sometimes desirable to stop and restart processes immediately. The <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>bos restart</B
></SPAN
> command
    provides this functionality, starting a completely new instance of each affected process: <UL
><LI
><P
>To stop and restart the BOS Server, which then restarts all processes marked with the
          <SAMP
CLASS="computeroutput"
>Run</SAMP
> status flag in the <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>BosConfig</B
></SPAN
> file, include the
          <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>-bosserver</B
></SPAN
> flag.</P
></LI
><LI
><P
>To stop and restart all processes marked with the <SAMP
CLASS="computeroutput"
>Run</SAMP
> status flag in the <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>BosConfig</B
></SPAN
> file, include the <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>-all</B
></SPAN
> flag. The BOS Server does not
          restart</P
></LI
><LI
><P
>To stop and restart specific processes regardless of the setting of their status flags in the <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>BosConfig</B
></SPAN
> file, specify the name of each process to restart.</P
></LI
></UL
></P
><P
>Restarting processes causes a service outage. It is usually best to schedule restarts for periods of low usage. The BOS
    Server automatically restarts all processes once a week, to reduce the potential for the <SPAN
CLASS="emphasis"
><I
CLASS="emphasis"
>core leaks</I
></SPAN
> that
    can develop as any process runs for an extended time; see <A
HREF="c6449.html#HDRWQ171"
>Setting the BOS Server's Restart
    Times</A
>.</P
><P
>    </P
><DIV
CLASS="sect2"
><H2
CLASS="sect2"
><A
NAME="Header_193"
>To stop and restart all processes including the BOS Server</A
></H2
><OL
TYPE="1"
><LI
><P
>Verify that you are listed in the <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>/usr/afs/etc/UserList</B
></SPAN
> file. If necessary, issue
          the <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>bos listusers</B
></SPAN
> command, which is fully described in <A
HREF="c32432.html#HDRWQ593"
>To
          display the users in the UserList file</A
>. <PRE
CLASS="programlisting"
>&#13;   % <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>bos listusers</B
></SPAN
> &#60;<VAR
CLASS="replaceable"
>machine name</VAR
>&#62;
</PRE
></P
></LI
><LI
><P
>Issue the <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>bos restart</B
></SPAN
> command with the <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>-bosserver</B
></SPAN
>
          flag to stop and restart the BOS Server, which restarts every process marked with status flag
          <SAMP
CLASS="computeroutput"
>Run</SAMP
> in the <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>BosConfig</B
></SPAN
> file. <PRE
CLASS="programlisting"
>&#13;   % <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>bos restart</B
></SPAN
> &#60;<VAR
CLASS="replaceable"
>machine name</VAR
>&#62;  <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>-bosserver</B
></SPAN
>
</PRE
></P
><P
>where <DIV
CLASS="variablelist"
><DL
><DT
><SPAN
CLASS="bold"
><B
CLASS="emphasis"
>res</B
></SPAN
></DT
><DD
><P
>Is the shortest acceptable abbreviation of <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>restart</B
></SPAN
>.</P
></DD
><DT
><SPAN
CLASS="bold"
><B
CLASS="emphasis"
>machine name</B
></SPAN
></DT
><DD
><P
>Specifies the server machine on which to restart all processes.</P
></DD
><DT
><SPAN
CLASS="bold"
><B
CLASS="emphasis"
>-bosserver</B
></SPAN
></DT
><DD
><P
>Stops the BOS Server and all processes running on the machine. A new BOS Server instance starts; it then
                  starts new instances of all processes marked with status flag <SAMP
CLASS="computeroutput"
>Run</SAMP
> in the
                  <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>BosConfig</B
></SPAN
> file.</P
></DD
></DL
></DIV
></P
></LI
></OL
></DIV
><DIV
CLASS="sect2"
><H2
CLASS="sect2"
><A
NAME="Header_194"
>To stop and immediately restart all processes except the BOS Server</A
></H2
><OL
TYPE="1"
><LI
><P
>Verify that you are listed in the <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>/usr/afs/etc/UserList</B
></SPAN
> file. If necessary, issue
          the <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>bos listusers</B
></SPAN
> command, which is fully described in <A
HREF="c32432.html#HDRWQ593"
>To
          display the users in the UserList file</A
>. <PRE
CLASS="programlisting"
>&#13;   % <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>bos listusers</B
></SPAN
> &#60;<VAR
CLASS="replaceable"
>machine name</VAR
>&#62;
</PRE
></P
></LI
><LI
><P
>Issue the <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>bos restart</B
></SPAN
> command with the <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>-all</B
></SPAN
> flag
          to stop and immediately restart every process marked with status flag <SAMP
CLASS="computeroutput"
>Run</SAMP
> in the
          <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>BosConfig</B
></SPAN
> file. The BOS Server does not restart. <PRE
CLASS="programlisting"
>&#13;   % <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>bos restart</B
></SPAN
> &#60;<VAR
CLASS="replaceable"
>machine name</VAR
>&#62; <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>-all</B
></SPAN
>
</PRE
></P
><P
>where <DIV
CLASS="variablelist"
><DL
><DT
><SPAN
CLASS="bold"
><B
CLASS="emphasis"
>res</B
></SPAN
></DT
><DD
><P
>Is the shortest acceptable abbreviation of <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>restart</B
></SPAN
>.</P
></DD
><DT
><SPAN
CLASS="bold"
><B
CLASS="emphasis"
>machine name</B
></SPAN
></DT
><DD
><P
>Specifies the server machine on which to stop and restart processes.</P
></DD
><DT
><SPAN
CLASS="bold"
><B
CLASS="emphasis"
>-all</B
></SPAN
></DT
><DD
><P
>Stops and immediately restarts all processes marked with status flag <SAMP
CLASS="computeroutput"
>Run</SAMP
> in
                  the <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>BosConfig</B
></SPAN
> file.</P
></DD
></DL
></DIV
></P
></LI
></OL
></DIV
><DIV
CLASS="sect2"
><H2
CLASS="sect2"
><A
NAME="Header_195"
>To stop and immediately restart specific processes</A
></H2
><OL
TYPE="1"
><LI
><P
>Verify that you are listed in the <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>/usr/afs/etc/UserList</B
></SPAN
> file. If necessary, issue
          the <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>bos listusers</B
></SPAN
> command, which is fully described in <A
HREF="c32432.html#HDRWQ593"
>To
          display the users in the UserList file</A
>. <PRE
CLASS="programlisting"
>&#13;   % <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>bos listusers</B
></SPAN
> &#60;<VAR
CLASS="replaceable"
>machine name</VAR
>&#62;
</PRE
></P
></LI
><LI
><P
>Issue the <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>bos restart</B
></SPAN
> command to stop and immediately restart one or more specified
          processes, regardless of their status flag setting in the <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>BosConfig</B
></SPAN
> file.
          <PRE
CLASS="programlisting"
>&#13;   % <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>bos restart</B
></SPAN
> &#60;<VAR
CLASS="replaceable"
>machine name</VAR
>&#62; &#60;<VAR
CLASS="replaceable"
>instances</VAR
>&#62;+
</PRE
></P
><P
>where <DIV
CLASS="variablelist"
><DL
><DT
><SPAN
CLASS="bold"
><B
CLASS="emphasis"
>res</B
></SPAN
></DT
><DD
><P
>Is the shortest acceptable abbreviation of <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>restart</B
></SPAN
>.</P
></DD
><DT
><SPAN
CLASS="bold"
><B
CLASS="emphasis"
>machine name</B
></SPAN
></DT
><DD
><P
>Names the server machine on which to restart the specified processes.</P
></DD
><DT
><SPAN
CLASS="bold"
><B
CLASS="emphasis"
>instances</B
></SPAN
></DT
><DD
><P
>Specifies each process to stop and immediately restart. Use the name assigned to the process at
                  creation.</P
></DD
></DL
></DIV
></P
></LI
></OL
></DIV
></DIV
><DIV
CLASS="sect1"
><H1
CLASS="sect1"
><A
NAME="HDRWQ171"
>Setting the BOS Server's Restart Times</A
></H1
><P
>The BOS Server by default restarts once a week, and the new instance restarts all processes marked with status flag
    <SAMP
CLASS="computeroutput"
>Run</SAMP
> in the local <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>/usr/afs/local/BosConfig</B
></SPAN
> file (this is
    equivalent to issuing the <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>bos restart</B
></SPAN
> command with the <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>-bosserver</B
></SPAN
> flag). The default restart time is Sunday at 4:00 a.m. The weekly restart is designed to
    minimize core leaks, which can develop as a process continues to allocate virtual memory but does not free it again. When the
    memory is completely exhausted, the machine can no longer function correctly.</P
><P
>The BOS Server also by default checks once a day for any newly installed binary files. If it finds that the modification
    time stamp on a process's binary file in the <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>/usr/afs/bin</B
></SPAN
> directory is more recent than the
    time at which the process last started, it restarts the process so that a new instance starts using the new binary file. The
    default binary-checking time is 5:00 a.m.</P
><P
>Because restarts can cause outages during which the file system is inaccessible, the default times for restarts are in the
    early morning when usage is likely to be lowest. Restarting a database server process on any database server machine usually
    makes the entire system unavailable to everyone for a brief time, whereas restarting other types of processes inconveniences
    only users interacting with that process on that machine. The longest outages typically result from restarting the <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>fs</B
></SPAN
> process, because the File Server must reattach all volumes.</P
><P
>The <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>BosConfig</B
></SPAN
> file on each file server machine records the two restart times. To display
    the current setting, issue the <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>bos getrestart</B
></SPAN
> command. To reset a time, use the <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>bos setrestart</B
></SPAN
> command.</P
><DIV
CLASS="sect2"
><H2
CLASS="sect2"
><A
NAME="Header_197"
>To display the BOS Server restart times</A
></H2
><OL
TYPE="1"
><LI
><P
>Issue the <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>bos getrestart</B
></SPAN
> command to display the automatic restart times.
          <PRE
CLASS="programlisting"
>&#13;   % <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>bos getrestart</B
></SPAN
> &#60;<VAR
CLASS="replaceable"
>machine name</VAR
>&#62;
</PRE
></P
><P
>where <DIV
CLASS="variablelist"
><DL
><DT
><SPAN
CLASS="bold"
><B
CLASS="emphasis"
>getr</B
></SPAN
></DT
><DD
><P
>Is the shortest acceptable abbreviation of <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>getrestart</B
></SPAN
>.</P
></DD
><DT
><SPAN
CLASS="bold"
><B
CLASS="emphasis"
>machine name</B
></SPAN
></DT
><DD
><P
>Specifies the server machine for which to display the restart times.</P
></DD
></DL
></DIV
></P
></LI
></OL
></DIV
><DIV
CLASS="sect2"
><H2
CLASS="sect2"
><A
NAME="HDRWQ172"
>To set the general or binary restart time</A
></H2
><OL
TYPE="1"
><LI
><P
>Verify that you are listed in the <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>/usr/afs/etc/UserList</B
></SPAN
> file. If necessary, issue
          the <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>bos listusers</B
></SPAN
> command, which is fully described in <A
HREF="c32432.html#HDRWQ593"
>To
          display the users in the UserList file</A
>. <PRE
CLASS="programlisting"
>&#13;   % <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>bos listusers</B
></SPAN
> &#60;<VAR
CLASS="replaceable"
>machine name</VAR
>&#62;
</PRE
></P
></LI
><LI
><P
>Issue the <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>bos setrestart</B
></SPAN
> command with the <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>-general</B
></SPAN
>
          flag to set the general restart time or the <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>-newbinary</B
></SPAN
> flag to set the binary restart
          time. The command accepts only one of the flags at a time. <PRE
CLASS="programlisting"
>&#13;   % <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>bos setrestart</B
></SPAN
> &#60;<VAR
CLASS="replaceable"
>machine name</VAR
>&#62; "&#60;<VAR
CLASS="replaceable"
>time to restart server</VAR
>&#62;" [<SPAN
CLASS="bold"
><B
CLASS="emphasis"
>-general</B
></SPAN
>]  [<SPAN
CLASS="bold"
><B
CLASS="emphasis"
>-newbinary</B
></SPAN
>]
</PRE
></P
><P
>where <DIV
CLASS="variablelist"
><DL
><DT
><SPAN
CLASS="bold"
><B
CLASS="emphasis"
>setr</B
></SPAN
></DT
><DD
><P
>Is the shortest acceptable abbreviation of <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>setrestart</B
></SPAN
>.</P
></DD
><DT
><SPAN
CLASS="bold"
><B
CLASS="emphasis"
>machine name</B
></SPAN
></DT
><DD
><P
>Specifies the server machine.</P
></DD
><DT
><SPAN
CLASS="bold"
><B
CLASS="emphasis"
>time to restart server</B
></SPAN
></DT
><DD
><P
>Sets when the BOS Server restarts itself (if combined with the <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>-general</B
></SPAN
>
                  flag) or any process with a new binary file (if combined with the <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>-newbinary</B
></SPAN
>
                  flag). Provide one of the following types of values: <UL
><LI
><P
>The string <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>never</B
></SPAN
>, which directs the BOS Server never to perform the
                        indicated type of restart.</P
></LI
><LI
><P
>A time of day (the conventional type of value for the binary restart time). Separate the hours and
                        minutes with a colon (<SPAN
CLASS="emphasis"
><I
CLASS="emphasis"
>hh</I
></SPAN
>:<SPAN
CLASS="emphasis"
><I
CLASS="emphasis"
>MM</I
></SPAN
>), and use either 24-hour format, or a
                        value in the range from <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>1:00</B
></SPAN
> through <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>12:59</B
></SPAN
>
                        with the addition of <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>am</B
></SPAN
> or <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>pm</B
></SPAN
>. For
                        example, both <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>14:30</B
></SPAN
> and <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>"2:30 pm"</B
></SPAN
> indicate
                        2:30 in the afternoon. Surround this parameter with double quotes (<SPAN
CLASS="bold"
><B
CLASS="emphasis"
>" "</B
></SPAN
>) if
                        it contains a space.</P
></LI
><LI
><P
>A day of the week and time of day, separated by a space and surrounded with double quotes (<SPAN
CLASS="bold"
><B
CLASS="emphasis"
>" "</B
></SPAN
>). This is the conventional type of value for the general restart. For the day,
                        provide either the whole name or the first three letters, all in lowercase letters (<SPAN
CLASS="bold"
><B
CLASS="emphasis"
>sunday</B
></SPAN
> or <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>sun</B
></SPAN
>, <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>thursday</B
></SPAN
> or <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>thu</B
></SPAN
>, and so on). For the time, use the
                        same format as when specifying the time alone.</P
></LI
></UL
></P
><P
>If desired, precede a time or day and time definition with the string <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>every</B
></SPAN
>
                  or <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>at</B
></SPAN
>. These words do not change the meaning, but possibly make the output of the
                  <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>bos getrestart</B
></SPAN
> command easier to understand.</P
><DIV
CLASS="note"
><BLOCKQUOTE
CLASS="note"
><P
><B
>Note: </B
>If the specified time is within one hour of the current time, the BOS Server does not perform the restart
                    until the next eligible time (the next day for a time or next week for a day and time).</P
></BLOCKQUOTE
></DIV
></DD
><DT
><SPAN
CLASS="bold"
><B
CLASS="emphasis"
>-general</B
></SPAN
></DT
><DD
><P
>Sets the general restart time when the BOS Server restarts itself.</P
></DD
><DT
><SPAN
CLASS="bold"
><B
CLASS="emphasis"
>-newbinary</B
></SPAN
></DT
><DD
><P
>Sets the restart time for processes with new binary files.</P
></DD
></DL
></DIV
></P
></LI
></OL
></DIV
></DIV
><DIV
CLASS="sect1"
><H1
CLASS="sect1"
><A
NAME="HDRWQ173"
>Displaying Server Process Log Files</A
></H1
><P
>The <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>/usr/afs/logs</B
></SPAN
> directory on each file server machine contains log files that detail
    interesting events that occur during normal operation of some AFS server processes. The self-explanatory information in the log
    files can help you evaluate process failures and other problems. To display a log file remotely, issue the <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>bos getlog</B
></SPAN
> command. You can also establish a connection to the server machine and use a text editor or
    other file display program (such as the <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>cat</B
></SPAN
> command).</P
><DIV
CLASS="note"
><BLOCKQUOTE
CLASS="note"
><P
><B
>Note: </B
>Log files can grow unmanageably large if you do not periodically shutdown and restart the database server processes (for
      example, if you disable the general restart time). In this case it is a good policy periodically to issue the UNIX <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>rm</B
></SPAN
> command to delete the current log file. The server process automatically creates a new one as
      needed.</P
></BLOCKQUOTE
></DIV
><DIV
CLASS="sect2"
><H2
CLASS="sect2"
><A
NAME="Header_200"
>To examine a server process log file</A
></H2
><OL
TYPE="1"
><LI
><P
>Verify that you are listed in the <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>/usr/afs/etc/UserList</B
></SPAN
> file. If necessary, issue
          the <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>bos listusers</B
></SPAN
> command, which is fully described in <A
HREF="c32432.html#HDRWQ593"
>To
          display the users in the UserList file</A
>. <PRE
CLASS="programlisting"
>&#13;   % <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>bos listusers</B
></SPAN
> &#60;<VAR
CLASS="replaceable"
>machine name</VAR
>&#62;
</PRE
></P
></LI
><LI
><P
>Issue the <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>bos getlog</B
></SPAN
> command to display a log file. <PRE
CLASS="programlisting"
>&#13;   % <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>bos getlog</B
></SPAN
>  &#60;<VAR
CLASS="replaceable"
>machine name</VAR
>&#62;  &#60;<VAR
CLASS="replaceable"
>log file to examine</VAR
>&#62;
</PRE
></P
><P
>where <DIV
CLASS="variablelist"
><DL
><DT
><SPAN
CLASS="bold"
><B
CLASS="emphasis"
>getl</B
></SPAN
></DT
><DD
><P
>Is the shortest acceptable abbreviation of <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>getlog</B
></SPAN
>.</P
></DD
><DT
><SPAN
CLASS="bold"
><B
CLASS="emphasis"
>machine name</B
></SPAN
></DT
><DD
><P
>Specifies the server machine from which to display the log file.</P
></DD
><DT
><SPAN
CLASS="bold"
><B
CLASS="emphasis"
>log file to examine</B
></SPAN
></DT
><DD
><P
>Names the log file to be displayed. Provide one of the following file names to display the indicated log
                  file from the <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>/usr/afs/logs</B
></SPAN
> directory. <UL
><LI
><P
><SPAN
CLASS="bold"
><B
CLASS="emphasis"
>AuthLog</B
></SPAN
> for the Authentication Server log file</P
></LI
><LI
><P
><SPAN
CLASS="bold"
><B
CLASS="emphasis"
>BackupLog</B
></SPAN
> for the Backup Server log file</P
></LI
><LI
><P
><SPAN
CLASS="bold"
><B
CLASS="emphasis"
>BosLog</B
></SPAN
> for the BOS Server log file</P
></LI
><LI
><P
><SPAN
CLASS="bold"
><B
CLASS="emphasis"
>FileLog</B
></SPAN
> for the File Server log file</P
></LI
><LI
><P
><SPAN
CLASS="bold"
><B
CLASS="emphasis"
>SalvageLog</B
></SPAN
> for the Salvager log file</P
></LI
><LI
><P
><SPAN
CLASS="bold"
><B
CLASS="emphasis"
>VLLog</B
></SPAN
> for the Volume Location (VL) Server log file</P
></LI
><LI
><P
><SPAN
CLASS="bold"
><B
CLASS="emphasis"
>VolserLog</B
></SPAN
> for the Volume Server log file</P
></LI
></UL
></P
><P
>You can provide a full or relative pathname to display a file from another directory. Relative pathnames are
                  interpreted relative to the <SPAN
CLASS="bold"
><B
CLASS="emphasis"
>/usr/afs/logs</B
></SPAN
> directory.</P
></DD
></DL
></DIV
></P
></LI
></OL
></DIV
></DIV
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
SUMMARY="Footer navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="c3025.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="book1.html"
ACCESSKEY="H"
>Home</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="c8420.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>Administering Server Machines</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="p3023.html"
ACCESSKEY="U"
>Up</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>Managing Volumes</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>