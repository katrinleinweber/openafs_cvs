<?xml version="1.0" encoding="UTF-8"?>
<refentry id="backup_addhost8">
  <refmeta>
    <refentrytitle>backup addhost</refentrytitle>
    <manvolnum>8</manvolnum>
  </refmeta>
  <refnamediv>
    <refname>backup addhost</refname>
    <refpurpose>Adds a Tape Coordinator entry to the Backup Database</refpurpose>
  </refnamediv>
  <refsect1>
    <title>Synopsis</title>
    <para><emphasis role="bold">backup addhost</emphasis> <emphasis role="bold">-tapehost</emphasis> &lt;<emphasis>tape machine name</emphasis>&gt;
        [<emphasis role="bold">-portoffset</emphasis> &lt;<emphasis>TC port offset</emphasis>&gt;]
        [<emphasis role="bold">-localauth</emphasis>] [<emphasis role="bold">-cell</emphasis> &lt;<emphasis>cell name</emphasis>&gt;] [<emphasis role="bold">-help</emphasis>]</para>

    <para><emphasis role="bold">backup addh</emphasis> <emphasis role="bold">-t</emphasis> &lt;<emphasis>tape machine name</emphasis>&gt; [<emphasis role="bold">-p</emphasis> &lt;<emphasis>TC port offset</emphasis>&gt;]
        [<emphasis role="bold">-l</emphasis>] [<emphasis role="bold">-c</emphasis> &lt;<emphasis>cell name</emphasis>&gt;] [<emphasis role="bold">-h</emphasis>]</para>

  </refsect1>
  <refsect1>
    <title>Description</title>
    <para>The <emphasis role="bold">backup addhost</emphasis> command creates a Tape Coordinator entry in the
    Backup Database. The entry records</para>

    <itemizedlist>
      <listitem>
        <para>The host name of the Tape Coordinator machine where the Tape Coordinator
        (<emphasis role="bold">butc</emphasis>) process runs, as specified with the <emphasis role="bold">-tapehost</emphasis> argument.</para>

      </listitem>
      <listitem>
        <para>The Tape Coordinator's port offset number, as specified with the
        <emphasis role="bold">-portoffset</emphasis> argument. An entry for the port offset must also appear in
        the <replaceable>/usr/afs/backup/tapeconfig</replaceable> file on the Tape Coordinator machine,
        where it is mapped to a UNIX device name (for a tape device) or pathname
        (for a backup data file).</para>

      </listitem>
    </itemizedlist>
    <para>Each Tape Coordinator must have its own port offset number, and the
    command fails if a Backup Database entry already exists for the requested
    port offset number. To display existing Tape Coordinator entries, use the
    <emphasis role="bold">backup listhosts</emphasis> command.</para>

  </refsect1>
  <refsect1>
    <title>Options</title>
    <variablelist>
      <varlistentry>
        <term><emphasis role="bold">-tapehost</emphasis> &lt;<emphasis>tape machine name</emphasis>&gt;</term>
        <listitem>
          <para>Specifies the fully-qualified hostname of the machine for which to create
          a Tape Coordinator entry in the Backup Database. The machine must have an
          entry in either the cell's naming service (such as the Domain Name
          Service) or the host file (<replaceable>/etc/hosts</replaceable> or equivalent) on the machine
          where the command is issued.</para>

        </listitem>
      </varlistentry>
      <varlistentry>
        <term><emphasis role="bold">-portoffset</emphasis> &lt;<emphasis>TC port offset</emphasis>&gt;</term>
        <listitem>
          <para>Specifies the Tape Coordinator's port offset number. Provide an integer
          from the range <computeroutput>0</computeroutput> through <computeroutput>58510</computeroutput>, or omit this argument to use the
          default value of <computeroutput>0</computeroutput> (zero). The value must match the port offset number
          recorded for the same combination of Tape Coordinator and tape device or
          file in the <replaceable>/usr/afs/backup/tapeconfig</replaceable> file on the Tape Coordinator
          machine named by the <emphasis role="bold">-tapehost</emphasis> argument.</para>

        </listitem>
      </varlistentry>
      <varlistentry>
        <term><emphasis role="bold">-localauth</emphasis></term>
        <listitem>
          <para>Constructs a server ticket using a key from the local
          <replaceable>/usr/afs/etc/KeyFile</replaceable> file. The <emphasis role="bold">backup</emphasis> command interpreter presents
          it to the Backup Server, Volume Server and VL Server during mutual
          authentication. Do not combine this flag with the <emphasis role="bold">-cell</emphasis> argument. For
          more details, see <link linkend="backup8">backup(8)</link>.</para>

        </listitem>
      </varlistentry>
      <varlistentry>
        <term><emphasis role="bold">-cell</emphasis> &lt;<emphasis>cell name</emphasis>&gt;</term>
        <listitem>
          <para>Names the cell in which to run the command. Do not combine this argument
          with the <emphasis role="bold">-localauth</emphasis> flag. For more details, see <link linkend="backup8">backup(8)</link>.</para>

        </listitem>
      </varlistentry>
      <varlistentry>
        <term><emphasis role="bold">-help</emphasis></term>
        <listitem>
          <para>Prints the online help for this command. All other valid options are
          ignored.</para>

        </listitem>
      </varlistentry>
    </variablelist>
  </refsect1>
  <refsect1>
    <title>Examples</title>
    <para>The following command creates an entry in the Backup Database that assigns
    port offset number 4 to a Tape Coordinator running on the machine
    <computeroutput>backup1.abc.com</computeroutput>:</para>

<programlisting>
   % backup addhost -tapehost backup1.abc.com -portoffset 4

</programlisting>
      <para>The following command creates a Backup Database entry that assigns port
      offset number 0 to a Tape Coordinator on the machine <computeroutput>backup3.abc.com</computeroutput>:</para>

<programlisting>
   % backup addhost backup3.abc.com

</programlisting>
      </refsect1>
      <refsect1>
        <title>Privilege Required</title>
        <para>The issuer must be listed in the <replaceable>/usr/afs/etc/UserList</replaceable> file on every
        machine where the Backup Server is running, or must be logged onto a
        server machine as the local superuser <computeroutput>root</computeroutput> if the <emphasis role="bold">-localauth</emphasis> flag is
        included.</para>

      </refsect1>
      <refsect1>
        <title>See Also</title>
        <para><link linkend="backup8">backup(8)</link>,
        <link linkend="backup_delhost8">backup_delhost(8)</link>,
        <link linkend="backup_listhosts8">backup_listhosts(8)</link></para>

      </refsect1>
      <refsect1>
        <title>Copyright</title>
        <para>IBM Corporation 2000. &lt;http://www.ibm.com/&gt; All Rights Reserved.</para>

        <para>This documentation is covered by the IBM Public License Version 1.0.  It was
        converted from HTML to POD by software written by Chas Williams and Russ
        Allbery, based on work by Alf Wachsmann and Elizabeth Cassell.</para>

      </refsect1>
    </refentry>
