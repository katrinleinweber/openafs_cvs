<?xml version="1.0" encoding="UTF-8"?>
<refentry id="backup_status8">
  <refmeta>
    <refentrytitle>backup status</refentrytitle>
    <manvolnum>8</manvolnum>
  </refmeta>
  <refnamediv>
    <refname>backup status</refname>
    <refpurpose>Reports a Tape Coordinator's status</refpurpose>
  </refnamediv>
  <refsect1>
    <title>Synopsis</title>
    <para><emphasis role="bold">backup status</emphasis> [<emphasis role="bold">-portoffset</emphasis> &lt;<emphasis>TC port offset</emphasis>&gt;] [<emphasis role="bold">-localauth</emphasis>]
        [<emphasis role="bold">-cell</emphasis> &lt;<emphasis>cell name</emphasis>&gt;] [<emphasis role="bold">-help</emphasis>]</para>

    <para><emphasis role="bold">backup st</emphasis> [<emphasis role="bold">-p</emphasis> &lt;<emphasis>TC port offset</emphasis>&gt;] [<emphasis role="bold">-l</emphasis>] [<emphasis role="bold">-c</emphasis> &lt;<emphasis>cell name</emphasis>&gt;]
        [<emphasis role="bold">-h</emphasis>]</para>

  </refsect1>
  <refsect1>
    <title>Description</title>
    <para>The <emphasis role="bold">backup status</emphasis> command displays which operation, if any, the
    indicated Tape Coordinator is currently executing.</para>

  </refsect1>
  <refsect1>
    <title>Options</title>
    <variablelist>
      <varlistentry>
        <term><emphasis role="bold">-portoffset</emphasis> &lt;<emphasis>TC port offset</emphasis>&gt;</term>
        <listitem>
          <para>Specifies the port offset number of the Tape Coordinator for which to
          report the status.</para>

        </listitem>
      </varlistentry>
      <varlistentry>
        <term><emphasis role="bold">-localauth</emphasis></term>
        <listitem>
          <para>Constructs a server ticket using a key from the local
          <replaceable>/usr/afs/etc/KeyFile</replaceable> file. The <emphasis role="bold">backup</emphasis> command interpreter presents
          it to the Backup Server, Volume Server and VL Server during mutual
          authentication. Do not combine this flag with the <emphasis role="bold">-cell</emphasis> argument. For
          more details, see <link linkend="backup8">backup(8)</link>.</para>

        </listitem>
      </varlistentry>
      <varlistentry>
        <term><emphasis role="bold">-cell</emphasis> &lt;<emphasis>cell name</emphasis>&gt;</term>
        <listitem>
          <para>Names the cell in which to run the command. Do not combine this argument
          with the <emphasis role="bold">-localauth</emphasis> flag. For more details, see <link linkend="backup8">backup(8)</link>.</para>

        </listitem>
      </varlistentry>
      <varlistentry>
        <term><emphasis role="bold">-help</emphasis></term>
        <listitem>
          <para>Prints the online help for this command. All other valid options are
          ignored.</para>

        </listitem>
      </varlistentry>
    </variablelist>
  </refsect1>
  <refsect1>
    <title>Output</title>
    <para>The following message indicates that the Tape Coordinator is not currently
    performing an operation:</para>

<programlisting>
   Tape coordinator is idle

</programlisting>
      <para>Otherwise, the output includes a message of the following format for each
      running or pending operation:</para>

<programlisting>
   Task &amp;lt;task_ID&amp;gt;:  &amp;lt;operation&amp;gt;:   &amp;lt;status&amp;gt;

</programlisting>
        <para>where</para>

        <variablelist>
          <varlistentry>
            <term>&lt;task_ID&gt;</term>
            <listitem>
              <para>Is a task identification number assigned by the Tape Coordinator.  It
              begins with the Tape Coordinator's port offset number.</para>

            </listitem>
          </varlistentry>
          <varlistentry>
            <term>&lt;operation&gt;</term>
            <listitem>
              <para>Identifies the operation the Tape Coordinator is performing, which is
              initiated by the indicated command:</para>

              <variablelist>
                <varlistentry>
                  <term>Dump</term>
                  <listitem>
                    <para>The <emphasis role="bold">backup dump</emphasis> command.</para>

                  </listitem>
                </varlistentry>
                <varlistentry>
                  <term>Restore</term>
                  <listitem>
                    <para>The <emphasis role="bold">backup diskrestore</emphasis>, <emphasis role="bold">backup volrestore</emphasis>, or <emphasis role="bold">backup
                    volsetrestore</emphasis> commands.</para>

                  </listitem>
                </varlistentry>
                <varlistentry>
                  <term>Labeltape</term>
                  <listitem>
                    <para>The <emphasis role="bold">backup labeltape</emphasis> command.</para>

                  </listitem>
                </varlistentry>
                <varlistentry>
                  <term>Scantape</term>
                  <listitem>
                    <para>The <emphasis role="bold">backup scantape</emphasis> command.</para>

                  </listitem>
                </varlistentry>
                <varlistentry>
                  <term>SaveDb</term>
                  <listitem>
                    <para>The <emphasis role="bold">backup savedb</emphasis> command.</para>

                  </listitem>
                </varlistentry>
                <varlistentry>
                  <term>RestoreDb</term>
                  <listitem>
                    <para>The <emphasis role="bold">backup restoredb</emphasis> command.</para>

                  </listitem>
                </varlistentry>
              </variablelist>
            </listitem>
          </varlistentry>
          <varlistentry>
            <term>&lt;status&gt;</term>
            <listitem>
              <para>Indicates the job's current status in one of the following messages.</para>

              <variablelist>
                <varlistentry>
                  <term><emphasis>number</emphasis> Kbytes transferred, volume <emphasis>volume_name</emphasis></term>
                  <listitem>
                    <para>For a running dump operation, indicates the number of kilobytes copied to
                    tape or a backup data file so far, and the volume currently being dumped.</para>

                  </listitem>
                </varlistentry>
                <varlistentry>
                  <term><emphasis>number</emphasis> Kbytes, restore.volume</term>
                  <listitem>
                    <para>For a running restore operation, indicates the number of kilobytes copied
                    into AFS from a tape or a backup data file so far.</para>

                  </listitem>
                </varlistentry>
                <varlistentry>
                  <term>[abort requested]</term>
                  <listitem>
                    <para>The <emphasis role="bold">backup kill</emphasis> command was issued, but the termination signal has yet
                    to reach the Tape Coordinator.</para>

                  </listitem>
                </varlistentry>
                <varlistentry>
                  <term>[abort sent]</term>
                  <listitem>
                    <para>The operation is canceled by the <emphasis role="bold">backup kill</emphasis> command.  Once the Backup
                    System removes an operation from the queue or stops it from running, it no
                    longer appears at all in the output from the command.</para>

                  </listitem>
                </varlistentry>
                <varlistentry>
                  <term>[butc contact lost]</term>
                  <listitem>
                    <para>The <emphasis role="bold">backup</emphasis> command interpreter cannot reach the Tape Coordinator. The
                    message can mean either that the Tape Coordinator handling the operation
                    was terminated or failed while the operation was running, or that the
                    connection to the Tape Coordinator timed out.</para>

                  </listitem>
                </varlistentry>
                <varlistentry>
                  <term>[done]</term>
                  <listitem>
                    <para>The Tape Coordinator has finished the operation.</para>

                  </listitem>
                </varlistentry>
                <varlistentry>
                  <term>[drive wait]</term>
                  <listitem>
                    <para>The operation is waiting for the specified tape drive to become free.</para>

                  </listitem>
                </varlistentry>
                <varlistentry>
                  <term>[operator wait]</term>
                  <listitem>
                    <para>The Tape Coordinator is waiting for the backup operator to insert a tape
                    in the drive.</para>

                  </listitem>
                </varlistentry>
              </variablelist>
            </listitem>
          </varlistentry>
        </variablelist>
        <para>If the Tape Coordinator is communicating with an XBSA server (a
        third-party backup utility that implements the Open Group's Backup Service
        API [XBSA]), the following message appears last in the output:</para>

<programlisting>
   &amp;lt;XBSA_program&amp;gt; Tape coordinator

</programlisting>
          <para>where &lt;XBSA_program&gt; is the name of the XBSA-compliant program.</para>

        </refsect1>
        <refsect1>
          <title>Examples</title>
          <para>The following example shows that the Tape Coordinator with port offset 4
          has so far dumped about 1.5 MB of data for the current dump operation, and
          is currently dumping the volume named <computeroutput>user.pat.backup</computeroutput>:</para>

<programlisting>
   % backup status -portoffset 4
   Task 4001:  Dump:   1520 Kbytes transferred,  volume user.pat.backup

</programlisting>
          </refsect1>
          <refsect1>
            <title>Privilege Required</title>
            <para>The issuer must be listed in the <replaceable>/usr/afs/etc/UserList</replaceable> file on every
            machine where the Backup Server is running, or must be logged onto a
            server machine as the local superuser <computeroutput>root</computeroutput> if the <emphasis role="bold">-localauth</emphasis> flag is
            included.</para>

          </refsect1>
          <refsect1>
            <title>See Also</title>
            <para><link linkend="backup8">backup(8)</link>,
            <link linkend="butc8">butc(8)</link></para>

          </refsect1>
          <refsect1>
            <title>Copyright</title>
            <para>IBM Corporation 2000. &lt;http://www.ibm.com/&gt; All Rights Reserved.</para>

            <para>This documentation is covered by the IBM Public License Version 1.0.  It was
            converted from HTML to POD by software written by Chas Williams and Russ
            Allbery, based on work by Alf Wachsmann and Elizabeth Cassell.</para>

          </refsect1>
        </refentry>
