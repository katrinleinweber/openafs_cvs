<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML 3//EN">
<HTML><HEAD>
<TITLE>Administration Reference</TITLE>
<!-- Begin Header Records  ========================================== -->
<!-- /tmp/idwt3190/auarf000.scr converted by idb2h R4.2 (359) ID      -->
<!-- Workbench Version (AIX) on 5 Nov 1999 at 13:58:29                -->
<META HTTP-EQUIV="updated" CONTENT="Fri, 05 Nov 1999 13:58:29">
<META HTTP-EQUIV="review" CONTENT="Sun, 05 Nov 2000 13:58:29">
<META HTTP-EQUIV="expires" CONTENT="Mon, 05 Nov 2001 13:58:29">
</HEAD><BODY>
<!-- (C) IBM Corporation 2000. All Rights Reserved    --> 
<BODY bgcolor="ffffff"> 
<!-- End Header Records  ============================================ -->
<A NAME="Top_Of_Page"></A>
<H1>Administration Reference</H1>
<HR><P ALIGN="center"> <A HREF="../index.htm"><IMG SRC="../books.gif" BORDER="0" ALT="[Return to Library]"></A> <A HREF="auarf002.htm#ToC"><IMG SRC="../toc.gif" BORDER="0" ALT="[Contents]"></A> <A HREF="auarf265.htm"><IMG SRC="../prev.gif" BORDER="0" ALT="[Previous Topic]"></A> <A HREF="#Bot_Of_Page"><IMG SRC="../bot.gif" BORDER="0" ALT="[Bottom of Topic]"></A> <A HREF="auarf267.htm"><IMG SRC="../next.gif" BORDER="0" ALT="[Next Topic]"></A> <A HREF="auarf284.htm#HDRINDEX"><IMG SRC="../index.gif" BORDER="0" ALT="[Index]"></A> <P> 
<P>
<H2><A NAME="HDRVOS_LISTVOL" HREF="auarf002.htm#ToC_280">vos listvol</A></H2>
<A NAME="IDX5729"></A>
<A NAME="IDX5730"></A>
<A NAME="IDX5731"></A>
<A NAME="IDX5732"></A>
<A NAME="IDX5733"></A>
<A NAME="IDX5734"></A>
<A NAME="IDX5735"></A>
<A NAME="IDX5736"></A>
<A NAME="IDX5737"></A>
<A NAME="IDX5738"></A>
<A NAME="IDX5739"></A>
<P><STRONG>Purpose</STRONG>
<P>Displays information from a volume header
<P><STRONG>Synopsis</STRONG>
<PRE><B>vos listvol -server</B> &lt;<VAR>machine&nbsp;name</VAR>>  [<B>-partition</B> &lt;<VAR>partition&nbsp;name</VAR>>]
            [<B>-fast</B>]  [<B>-long</B>]  [<B>-quiet</B>]  [<B>-extended</B>]  [<B>-cell</B> &lt;<VAR>cell&nbsp;name</VAR>>]  
            [<B>-noauth</B>]  [<B>-localauth</B>]  [<B>-verbose</B>]  [<B>-help</B>]
    
<B>vos listvo -s</B> &lt;<VAR>machine&nbsp;name</VAR>>  [<B>-p</B> &lt;<VAR>partition&nbsp;name</VAR>>]  [<B>-f</B>]  [<B>-lon</B>]  
           [<B>-q</B>]  [<B>-e</B>]  [<B>-c</B> &lt;<VAR>cell&nbsp;name</VAR>>]  [<B>-n</B>]  [<B>-loc</B>]  [<B>-v</B>]  [<B>-h</B>]
</PRE>
<P><STRONG>Description</STRONG>
<P>The <B>vos listvol</B> command formats and displays the following
information from the volume header of each specified volume&#58; volume
name, volume ID, volume type, size, and status at the server. The
actual information displayed depends on the combination of arguments supplied
when the command is issued. To display volume header information for
various numbers of volumes, combine the command&#39;s arguments as
indicated&#58;
<UL>
<P><LI>For every volume on a file server machine, specify the machine&#39;s name
with the <B>-server</B> argument.
<P><LI>For every volume at a particular site, combine the <B>-server</B>
argument with the <B>-partition</B> argument.
</UL>
<P>To display the Volume Location Database (VLDB) entry for one or more
volumes, use the <B>vos listvldb</B> command. To display both the
VLDB entry and the volume header for a single volume, use the <B>vos
examine</B> command.
<P><STRONG>Options</STRONG>
<DL>
<P><DT><B>-server
</B><DD>Identifies the file server machine that houses volumes for which to
display the header. Provide the machine&#39;s IP address or its host
name (either fully qualified or using an unambiguous abbreviation). For
details, see the introductory reference page for the <B>vos</B> command
suite. 
<P>This argument can be combined with the <B>-partition</B> argument, as
well as the <B>-fast</B>, <B>-long</B>, or <B>-extended</B>
flag.
<P><DT><B>-partition
</B><DD>Identifies the partition (on the file server machine specified by the
<B>-server</B> argument) that houses volumes for which to display the
header. Provide the partition&#39;s complete name with preceding slash
(for example, <B>/vicepa</B>) or use one of the three acceptable
abbreviated forms. For details, see the introductory reference page for
the <B>vos</B> command suite.
<P><DT><B>-fast
</B><DD>Displays only the volume ID numbers of volumes stored at the site
specified by the <B>-server</B>, and optionally <B>-partition</B>,
argument. Do not combine this flag with the <B>-extended</B>
flag.
<P><DT><B>-long
</B><DD>Displays more detailed information about each volume stored at the site
specified by the <B>-server</B>, and optionally <B>-partition</B>,
argument. The information includes the volume IDs of all three volume
types associated with the volume, and the read/write volume&#39;s quota,
creation date and update date.
<P><DT><B>-quiet
</B><DD>Suppresses the lines that summarize the number of volumes listed and their
status, which otherwise appear at the beginning and end of the output when the
output includes more than one volume.
<P><DT><B>-extended
</B><DD>Displays extensive statistics about access patterns for each volume stored
at the site specified by the <B>-server</B>, and optionally
<B>-partition</B>, argument. The statistics include the number of
reads and writes to files in the volume, and how recently files and
directories have been updated by their owners or other users. Do not
combine this flag with the <B>-fast</B> flag.
<P><DT><B>-cell
</B><DD>Names the cell in which to run the command. Do not combine this
argument with the <B>-localauth</B> flag. For more details, see the
introductory <B>vos</B> reference page.
<P><DT><B>-noauth
</B><DD>Assigns the unprivileged identity <B>anonymous</B> to the
issuer. Do not combine this flag with the <B>-localauth</B>
flag. For more details, see the introductory <B>vos</B> reference
page.
<P><DT><B>-localauth
</B><DD>Constructs a server ticket using a key from the local
<B>/usr/afs/etc/KeyFile</B> file. The <B>vos</B> command
interpreter presents it to the Volume Server and Volume Location Server during
mutual authentication. Do not combine this flag with the
<B>-cell</B> argument or <B>-noauth</B> flag. For more details,
see the introductory <B>vos</B> reference page.
<P><DT><B>-verbose
</B><DD>Produces on the standard output stream a detailed trace of the
command&#39;s execution. If this argument is omitted, only warnings
and error messages appear.
<P><DT><B>-help
</B><DD>Prints the online help for this command. All other valid options
are ignored.
</DL>
<P><STRONG>Output</STRONG>
<P>The output is ordered alphabetically by volume name and by default provides
the following information on a single line for each volume&#58;
<UL>
<P><LI>Name
<P><LI>Volume ID number
<A NAME="IDX5740"></A>
<P><LI>Type (the flag is <TT>RW</TT> for read/write, <TT>RO</TT> for
read-only, <TT>BK</TT> for backup)
<P><LI>Size in kilobytes (<TT>1024</TT> equals a megabyte)
<P><LI>Number of files in the volume, if the <B>-extended</B> flag is
provided
<A NAME="IDX5741"></A>
<P><LI>Status on the file server machine, which is one of the following&#58;
<DL>
<A NAME="IDX5742"></A>
<P><DT><B><TT>On-line</TT>
</B><DD>The volume is completely accessible to Cache Managers.
<A NAME="IDX5743"></A>
<P><DT><B><TT>Off-line</TT>
</B><DD>The volume is not accessible to Cache Managers, but does not seem to be
corrupted. This status appears while a volume is being dumped, for
example.
<A NAME="IDX5744"></A>
<P><DT><B><TT>Off-line**needs salvage**</TT>
</B><DD>The volume is not accessible to Cache Managers, because it seems to be
corrupted. Use the <B>bos salvage</B> or <B>salvager</B>
command to repair the corruption.
</DL>
</UL>
<P>If the following message appears instead of the previously listed
information, it indicates that a volume is not accessible to Cache Managers or
the <B>vos</B> command interpreter, for example because a clone is being
created.
<PRE>   **** Volume <VAR>volume_ID</VAR> is busy ****
</PRE>
<P>If the following message appears instead of the previously listed
information, it indicates that the File Server is unable to attach the volume,
perhaps because it is seriously corrupted. The <B>FileLog</B> and
<B>VolserLog</B> log files in the <B>/usr/afs/logs</B> directory on
the file server machine possibly provide additional information; use the
<B>bos getlog</B> command to display them.
<PRE>   **** Could not attach volume <VAR>volume_ID</VAR> ****
</PRE>
<P>The information about individual volumes is bracketed by summary
lines. The first line of output specifies the number of volumes in the
listing. The last line of output summarizes the number of volumes that
are online, offline, and busy. These lines do not appear if the
<B>-quiet</B> flag is used.
<P>If the <B>-fast</B> flag is added, the output displays only the volume
ID number of each volume, arranged in increasing numerical order. The
final line (which summarizes the number of online, offline, and busy volumes)
is omitted.
<P>If the <B>-long</B> flag is included, the output for each volume
includes all of the information in the default listing plus the
following. Each item in this list corresponds to a separate line of
output&#58;
<UL>
<P><LI>The file server machine and partition that house the volume, as determined
by the command interpreter as the command runs, rather than derived from the
VLDB or the volume header.
<A NAME="IDX5745"></A>
<A NAME="IDX5746"></A>
<A NAME="IDX5747"></A>
<A NAME="IDX5748"></A>
<A NAME="IDX5749"></A>
<A NAME="IDX5750"></A>
<A NAME="IDX5751"></A>
<A NAME="IDX5752"></A>
<P><LI>The volume ID numbers associated with the various versions of the
volume&#58; read/write (<TT>RWrite</TT>), read-only (<TT>ROnly</TT>),
backup (<TT>Backup</TT>), and ReleaseClone (<TT>RClone</TT>). One
of them matches the volume ID number that appears on the first line of the
volume&#39;s output. If the value in the <TT>RWrite</TT>,
<TT>ROnly</TT>, or <TT>Backup</TT> field is <TT>0</TT> (zero), there is
no volume of that type. If there is currently no ReleaseClone, the
<TT>RClone</TT> field does not appear at all.
<A NAME="IDX5753"></A>
<A NAME="IDX5754"></A>
<P><LI>The maximum space quota allotted to the read/write copy of the volume,
expressed in kilobyte blocks in the <TT>MaxQuota</TT> field.
<A NAME="IDX5755"></A>
<A NAME="IDX5756"></A>
<P><LI>The date and time the volume was created, in the <TT>Creation</TT>
field. If the volume has been restored with the <B>backup
diskrestore</B>, <B>backup volrestore</B>, or <B>vos restore</B>
command, this is the restore time.
<A NAME="IDX5757"></A>
<A NAME="IDX5758"></A>
<P><LI>The date and time when the contents of the volume last changed, in the
<TT>Last Update</TT> field. For read-only and backup volumes, it
matches the timestamp in the <TT>Creation</TT> field.
<A NAME="IDX5759"></A>
<A NAME="IDX5760"></A>
<P><LI>The number of times the volume has been accessed for a fetch or store
operation since the later of the two following times&#58; 
<UL>
<P><LI>12&#58;00 a.m. on the day the command is issued
<P><LI>The last time the volume changed location
</UL>
</UL>
<P>If the <B>-extended</B> flag is included, the output for each volume
includes all of the information reported with the <B>-long</B> flag, plus
two tables of statistics&#58;
<UL>
<P><LI>The table labeled <TT>Raw Read/Write Stats</TT> table summarizes the
number of times the volume has been accessed for reading or writing.
<P><LI>The table labeled <TT>Writes Affecting Authorship</TT> table contains
information on writes made to files and directories in the specified
volume.
</UL>
<P><STRONG>Examples</STRONG>
<P>The following example shows the output for the <B>/vicepb</B> partition
on the file server machine <B>fs2.abc.com</B> when no flags
are provided&#58;
<PRE>   % <B>vos listvol -server fs2.abc.com -partition b</B>
   Total number of volumes on server fs2.abc.com   \
                                       partition /vicepb &#58; 66
   sys                  1969534847 RW       1582 K On-line
   sys.backup           1969535105 BK       1582 K On-line
         .                   .     .         .   .    .
         .                   .     .         .   .    .
   user.pat             1969534536 RW      17518 K On-line
   user.pat.backup      1969534538 BK      17537 K On-line
   Total volumes onLine 66 ; Total volumes offLine 0 ;  Total busy 0
   
</PRE>
<P>The following example shows the output when the <B>-fast</B> flag is
added&#58;
<PRE>   % <B>vos listvol -server fs2.abc.com -partition b -fast</B>
   Total number of volumes on server fs2.abc.com   \
                                       partition /vicepb &#58; 66
    1969516782
    1969516784
        .
        .
    1969535796
    
</PRE>
<P>The following example shows two volumes from the output that appears when
the <B>-long</B> flag is added&#58;
<PRE>   % <B>vos listvol -server fs2.abc.com -partition b -long</B>
   Total number of volumes on server fs2.abc.com \
                                       partition /vicepb&#58; 66
         .                   .      .         .   .    .
         .                   .      .         .   .    .
   user.pat             1969534536 RW      17518 K On-line
        fs2.abc.com /vicepb
        RWrite 1969534536 ROnly 0        Backup 1969534538 
        MaxQuota      20000 K
        Creation    Mon Jun 12 09&#58;02&#58;25 1989
        Last Update Thu May 20 17&#58;39&#58;34 1999
        1573 accesses in the past day (i.e., vnode references)
   user.pat.backup      1969534538 BK      17537 K On-line
        fs2.abc.com /vicepb
        RWrite 1969534536 ROnly 0        Backup 1969534538 
        MaxQuota      20000 K
        Creation    Tue Jun 13 04&#58;37&#58;59 1989
        Last Update Wed May 19 06&#58;37&#58;59 1999
        0 accesses in the past day (i.e., vnode references)
          .                   .      .         .   .    .
          .                   .      .         .   .    .
   Total volumes onLine 66 ; Total volumes offLine 0 ; \
                                                Total busy 0
   
</PRE>
<P><STRONG>Privilege Required</STRONG>
<P>None
<P><STRONG>Related Information</STRONG>
<P><A HREF="auarf072.htm#HDRBK_DISKRESTORE">backup diskrestore</A>
<P><A HREF="auarf091.htm#HDRBK_VOLRESTORE">backup volrestore</A>
<P><A HREF="auarf102.htm#HDRBOS_GETLOG">bos getlog</A>
<P><A HREF="auarf114.htm#HDRBOS_SALVAGE">bos salvage</A>
<P><A HREF="auarf232.htm#HDRSALVAGER">salvager</A>
<P><A HREF="auarf252.htm#HDRVOS_INTRO">vos</A>
<P><A HREF="auarf261.htm#HDRVOS_EXAMINE">vos examine</A>
<P><A HREF="auarf265.htm#HDRVOS_LISTVLDB">vos listvldb</A>
<P><A HREF="auarf274.htm#HDRVOS_RESTORE">vos restore</A>
<P>
<HR><P ALIGN="center"> <A HREF="../index.htm"><IMG SRC="../books.gif" BORDER="0" ALT="[Return to Library]"></A> <A HREF="auarf002.htm#ToC"><IMG SRC="../toc.gif" BORDER="0" ALT="[Contents]"></A> <A HREF="auarf265.htm"><IMG SRC="../prev.gif" BORDER="0" ALT="[Previous Topic]"></A> <A HREF="#Top_Of_Page"><IMG SRC="../top.gif" BORDER="0" ALT="[Top of Topic]"></A> <A HREF="auarf267.htm"><IMG SRC="../next.gif" BORDER="0" ALT="[Next Topic]"></A> <A HREF="auarf284.htm#HDRINDEX"><IMG SRC="../index.gif" BORDER="0" ALT="[Index]"></A> <P> 
<!-- Begin Footer Records  ========================================== -->
<P><HR><B> 
<br>&#169; <A HREF="http://www.ibm.com/">IBM Corporation 2000.</A>  All Rights Reserved 
</B> 
<!-- End Footer Records  ============================================ -->
<A NAME="Bot_Of_Page"></A>
</BODY></HTML>
