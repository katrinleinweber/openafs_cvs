<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML 3//EN">
<HTML><HEAD>
<TITLE>Administration Reference</TITLE>
<!-- Begin Header Records  ========================================== -->
<!-- /tmp/idwt3190/auarf000.scr converted by idb2h R4.2 (359) ID      -->
<!-- Workbench Version (AIX) on 5 Nov 1999 at 13:58:29                -->
<META HTTP-EQUIV="updated" CONTENT="Fri, 05 Nov 1999 13:58:29">
<META HTTP-EQUIV="review" CONTENT="Sun, 05 Nov 2000 13:58:29">
<META HTTP-EQUIV="expires" CONTENT="Mon, 05 Nov 2001 13:58:29">
</HEAD><BODY>
<!-- (C) IBM Corporation 2000. All Rights Reserved    --> 
<BODY bgcolor="ffffff"> 
<!-- End Header Records  ============================================ -->
<A NAME="Top_Of_Page"></A>
<H1>Administration Reference</H1>
<HR><P ALIGN="center"> <A HREF="../index.htm"><IMG SRC="../books.gif" BORDER="0" ALT="[Return to Library]"></A> <A HREF="auarf002.htm#ToC"><IMG SRC="../toc.gif" BORDER="0" ALT="[Contents]"></A> <A HREF="auarf260.htm"><IMG SRC="../prev.gif" BORDER="0" ALT="[Previous Topic]"></A> <A HREF="#Bot_Of_Page"><IMG SRC="../bot.gif" BORDER="0" ALT="[Bottom of Topic]"></A> <A HREF="auarf262.htm"><IMG SRC="../next.gif" BORDER="0" ALT="[Next Topic]"></A> <A HREF="auarf284.htm#HDRINDEX"><IMG SRC="../index.gif" BORDER="0" ALT="[Index]"></A> <P> 
<P>
<H2><A NAME="HDRVOS_EXAMINE" HREF="auarf002.htm#ToC_275">vos examine</A></H2>
<A NAME="IDX5653"></A>
<A NAME="IDX5654"></A>
<A NAME="IDX5655"></A>
<A NAME="IDX5656"></A>
<A NAME="IDX5657"></A>
<A NAME="IDX5658"></A>
<A NAME="IDX5659"></A>
<A NAME="IDX5660"></A>
<A NAME="IDX5661"></A>
<A NAME="IDX5662"></A>
<A NAME="IDX5663"></A>
<P><STRONG>Purpose</STRONG>
<P>Displays information from the volume header and VLDB entry for a
volume.
<P><STRONG>Synopsis</STRONG>
<PRE><B>vos examine -id</B> &lt;<VAR>volume&nbsp;name&nbsp;or&nbsp;ID</VAR>>  [<B>-extended</B>]  [<B>-cell</B> &lt;<VAR>cell&nbsp;name</VAR>>]  
            [<B>-noauth</B>]  [<B>-localauth</B>]  [<B>-verbose</B>]  [<B>-help</B>]
   
<B>vos e -i</B> &lt;<VAR>volume&nbsp;name&nbsp;or&nbsp;ID</VAR>>  [<B>-e</B>]  [<B>-c</B> &lt;<VAR>cell&nbsp;name</VAR>>]  [<B>-n</B>]  [<B>-l</B>]  [<B>-v</B>]  [<B>-h</B>]
    
<B>vos volinfo -i</B> &lt;<VAR>volume&nbsp;name&nbsp;or&nbsp;ID</VAR>>  [<B>-e</B>]  [<B>-c</B> &lt;<VAR>cell&nbsp;name</VAR>>]  
            [<B>-n</B>]  [<B>-l</B>]  [<B>-v</B>]  [<B>-h</B>]
   
<B>vos v -i</B> &lt;<VAR>volume&nbsp;name&nbsp;or&nbsp;ID</VAR>>  [<B>-e</B>]  [<B>-c</B> &lt;<VAR>cell&nbsp;name</VAR>>]  [<B>-n</B>]  [<B>-l</B>]  [<B>-v</B>]  [<B>-h</B>]
   
</PRE>
<P><STRONG>Description</STRONG>
<P>The <B>vos examine</B> command formats and displays information from
the Volume Location Database (VLDB) entry and the volume header of the volume
specified by the <B>-id</B> argument.
<P>To display the volume header only, use the <B>vos listvol</B>
command. To display information from the VLDB only, use the <B>vos
listvldb</B> command.
<P><STRONG>Options</STRONG>
<DL>
<P><DT><B>-id
</B><DD>Specifies either the complete name or volume ID number of the volume,
which can be read/write, read-only, or backup.
<P><DT><B>-extended
</B><DD>Display statistics about read and write operations on files and
directories in the volume.
<P><DT><B>-cell
</B><DD>Names the cell in which to run the command. Do not combine this
argument with the <B>-localauth</B> flag. For more details, see the
introductory <B>vos</B> reference page.
<P><DT><B>-noauth
</B><DD>Assigns the unprivileged identity <B>anonymous</B> to the
issuer. Do not combine this flag with the <B>-localauth</B>
flag. For more details, see the introductory <B>vos</B> reference
page.
<P><DT><B>-localauth
</B><DD>Constructs a server ticket using a key from the local
<B>/usr/afs/etc/KeyFile</B> file. The <B>vos</B> command
interpreter presents it to the Volume Server and Volume Location Server during
mutual authentication. Do not combine this flag with the
<B>-cell</B> argument or <B>-noauth</B> flag. For more details,
see the introductory <B>vos</B> reference page.
<P><DT><B>-verbose
</B><DD>Produces on the standard output stream a detailed trace of the
command&#39;s execution. If this argument is omitted, only warnings
and error messages appear.
<P><DT><B>-help
</B><DD>Prints the online help for this command. All other valid options
are ignored.
</DL>
<P><STRONG>Output</STRONG>
<P>The first seven lines of the output show information from the volume header
and the remaining lines come from the VLDB. Each item in the following
list corresponds to a line of output derived from the volume header.
<UL>
<P><LI>Basic information about the specified volume (displayed on a single
line)&#58; 
<UL>
<P><LI>Name
<P><LI>Volume ID number
<A NAME="IDX5664"></A>
<P><LI>Type (the flag is <TT>RW</TT> for read/write, <TT>RO</TT> for
read-only, <TT>BK</TT> for backup)
<P><LI>Size in kilobytes (<TT>1024</TT> equals a megabyte)
<P><LI>Number of files in the volume, if the <B>-extended</B> flag is
provided
<A NAME="IDX5665"></A>
<P><LI>Status on the file server machine, which is one of the following&#58;
<DL>
<A NAME="IDX5666"></A>
<P><DT><B><TT>On-line</TT>
</B><DD>The volume is completely accessible to Cache Managers.
<A NAME="IDX5667"></A>
<P><DT><B><TT>Off-line</TT>
</B><DD>The volume is not accessible to Cache Managers, but does not seem to be
corrupted. This status appears while a volume is being dumped, for
example.
<A NAME="IDX5668"></A>
<P><DT><B><TT>Off-line**needs salvage**</TT>
</B><DD>The volume is not accessible to Cache Managers, because it seems to be
corrupted. Use the <B>bos salvage</B> or <B>salvager</B>
command to repair the corruption.
</DL>
</UL>
<P><LI>The file server machine and partition that house the volume, as determined
by the command interpreter as the command runs, rather than derived from the
VLDB or the volume header.
<A NAME="IDX5669"></A>
<A NAME="IDX5670"></A>
<A NAME="IDX5671"></A>
<A NAME="IDX5672"></A>
<A NAME="IDX5673"></A>
<A NAME="IDX5674"></A>
<A NAME="IDX5675"></A>
<A NAME="IDX5676"></A>
<P><LI>The volume ID numbers associated with the various versions of the
volume&#58; read/write (<TT>RWrite</TT>), read-only (<TT>ROnly</TT>),
backup (<TT>Backup</TT>), and ReleaseClone (<TT>RClone</TT>). One
of them matches the volume ID number that appears on the first line of the
volume&#39;s output. If the value in the <TT>RWrite</TT>,
<TT>ROnly</TT>, or <TT>Backup</TT> field is <TT>0</TT> (zero), there is
no volume of that type. If there is currently no ReleaseClone, the
<TT>RClone</TT> field does not appear at all.
<A NAME="IDX5677"></A>
<A NAME="IDX5678"></A>
<P><LI>The maximum space quota allotted to the read/write copy of the volume,
expressed in kilobyte blocks in the <TT>MaxQuota</TT> field.
<A NAME="IDX5679"></A>
<A NAME="IDX5680"></A>
<P><LI>The date and time the volume was created, in the <TT>Creation</TT>
field. If the volume has been restored with the <B>backup
diskrestore</B>, <B>backup volrestore</B>, or <B>vos restore</B>
command, this is the restore time.
<A NAME="IDX5681"></A>
<A NAME="IDX5682"></A>
<P><LI>The date and time when the contents of the volume last changed, in the
<TT>Last Update</TT> field. For read-only and backup volumes, it
matches the timestamp in the <TT>Creation</TT> field.
<A NAME="IDX5683"></A>
<A NAME="IDX5684"></A>
<P><LI>The number of times the volume has been accessed for a fetch or store
operation since the later of the two following times&#58; 
<UL>
<P><LI>12&#58;00 a.m. on the day the command is issued
<P><LI>The last time the volume changed location
</UL>
</UL>
<P>When the <B>-extended</B> flag is included, two tables appear
next&#58;
<UL>
<P><LI>The table labeled <TT>Raw Read/Write Stats</TT> contains information on
the number of reads (fetches) and writes (stores) made on the specified
volume.
<P><LI>The table labeled <TT>Writes Affecting Authorship</TT> contains
information on writes made to files and directories in the specified
volume.
</UL>
<P>If the following message appears instead of the previously listed
information, it indicates that a volume is not accessible to Cache Managers or
the <B>vos</B> command interpreter, for example because a clone is being
created.
<PRE>   **** Volume <VAR>volume_ID</VAR> is busy ****
</PRE>
<P>If the following message appears instead of the previously listed
information, it indicates that the File Server is unable to attach the volume,
perhaps because it is seriously corrupted. The <B>FileLog</B> and
<B>VolserLog</B> log files in the <B>/usr/afs/logs</B> directory on
the file server machine possibly provide additional information; use the
<B>bos getlog</B> command to display them.
<PRE>   **** Could not attach volume <VAR>volume_ID</VAR> ****
</PRE>
<P>Following a blank line, information from the VLDB entry appears.
Each item in this list corresponds to a separate line in the output&#58;
<UL>
<P><LI>The base (read/write) volume name. The read-only and backup
versions have the same name with a <B>.readonly</B> and
<B>.backup</B> extension, respectively.
<P><LI>The volume ID numbers allocated to the versions of the volume that
actually exist, in fields labeled <TT>RWrite</TT> for the read/write,
<TT>ROnly</TT> for the read-only, <TT>Backup</TT> for the backup, and
<TT>RClone</TT> for the ReleaseClone. (If a field does not appear,
the corresponding version of the volume does not exist.) The appearance
of the <TT>RClone</TT> field normally indicates that a release operation did
not complete successfully; the <TT>Old release</TT> and <TT>New
release</TT> flags often also appear on one or more of the site definition
lines described just following.
<A NAME="IDX5685"></A>
<A NAME="IDX5686"></A>
<P><LI>The number of sites that house a read/write or read-only copy of the
volume, following the string <TT>number of sites -></TT>.
<A NAME="IDX5687"></A>
<A NAME="IDX5688"></A>
<A NAME="IDX5689"></A>
<A NAME="IDX5690"></A>
<A NAME="IDX5691"></A>
<P><LI>A line for each site that houses a read/write or read-only copy of the
volume, specifying the file server machine, partition, and type of volume
(<TT>RW</TT> for read/write or <TT>RO</TT> for read-only). If a
backup version exists, it is understood to share the read/write site.
Several flags can appear with a site definition&#58; 
<DL>
<A NAME="IDX5692"></A>
<P><DT><B><TT>Not released</TT>
</B><DD>Indicates that the <B>vos release</B> command has not been issued
since the <B>vos addsite</B> command was used to define the read-only
site.
<A NAME="IDX5693"></A>
<P><DT><B><TT>Old release</TT>
</B><DD>Indicates that a <B>vos release</B> command did not complete
successfully, leaving the previous, obsolete version of the volume at this
site.
<A NAME="IDX5694"></A>
<P><DT><B><TT>New release</TT>
</B><DD>Indicates that a <B>vos release</B> command did not complete
successfully, but that this site did receive the correct new version of the
volume.
</DL>
<P><LI>If the VLDB entry is locked, the string <TT>Volume is currently
LOCKED</TT>.
</UL>
<P>For further discussion of the <TT>New release</TT> and <TT>Old
release</TT> flags, see the reference page for the <B>vos release</B>
command.
<P><STRONG>Examples</STRONG>
<P>The following example shows output for the ABC Corporation volume called
<B>usr</B> with two read-only replication sites (this volume is mounted at
the <B>/afs/abc.com/usr</B> directory). For the sake of
illustration, the output shows the volume as locked.
<PRE>   % <B>vos examine usr</B>
   usr                           536870981 RW   3459 K On-line
        fs2.abc.com /vicepb
        RWrite 5360870981   ROnly 536870982   Backup 536870983
        MaxQuota      40000 K
        Creation    Mon Jun 12 15&#58;22&#58;06 1989
        Last Update Fri Jun 16 09&#58;34&#58;35 1989
        5719 accesses in the past day (i.e., vnode references)
        RWrite&#58; 5360870981   ROnly&#58; 536870982   Backup&#58; 536870983
        number of sites -> 3
           server fs1.abc.com partition /vicepa RO Site 
           server fs3.abc.com partition /vicepa RO Site 
           server fs2.abc.com partition /vicepb RW Site 
        Volume is currently LOCKED  
   
</PRE>
<P>The following example shows the output for the volume
<B>user.terry</B> using the <B>-extended</B> flag. The
volume has no read-only replication sites.
<PRE>   %<B> vos examine -id user.terry -extended</B>
   user.terry         354287190 RW    2302 K used 119 files On-line
       fs4.abc.com /vicepc
       RWrite 354287190 ROnly          0 Backup 354287192
       MaxQuota       5000 K
       Creation    Wed Nov 25 17&#58;38&#58;57 1992
       Last Update Tue Dec 15 10&#58;46&#58;20 1992
       598 accesses in the past day (i.e., vnode references)
                         Raw Read/Write Stats
             |-------------------------------------------|
             |    Same Network     |    Diff Network     |
             |----------|----------|----------|----------|
             |  Total   |   Auth   |   Total  |   Auth   |
             |----------|----------|----------|----------|
   Reads     |       55 |       55 |       38 |       38 |
   Writes    |       95 |       95 |        0 |        0 |
             |-------------------------------------------|
                      Writes Affecting Authorship
             |-------------------------------------------|
             |   File Authorship   | Directory Authorship|
             |----------|----------|----------|----------|
             |   Same   |   Diff   |    Same  |   Diff   |
             |----------|----------|----------|----------|
   0-60 sec  |       38 |        0 |       21 |        1 |
   1-10 min  |        2 |        0 |        7 |        0 |
   10min-1hr |        0 |        0 |        1 |        0 |
   1hr-1day  |        1 |        0 |        5 |        1 |
   1day-1wk  |        0 |        0 |        0 |        0 |
   > 1wk     |        0 |        0 |        0 |        0 |
             |-------------------------------------------|
       RWrite&#58; 354287190    Backup&#58; 354287192
       number of sites -> 1
          server fs4.abc.com partition /vicepc RW Site
   
</PRE>
<P><STRONG>Privilege Required</STRONG>
<P>None
<P><STRONG>Related Information</STRONG>
<P><A HREF="auarf072.htm#HDRBK_DISKRESTORE">backup diskrestore</A>
<P><A HREF="auarf091.htm#HDRBK_VOLRESTORE">backup volrestore</A>
<P><A HREF="auarf102.htm#HDRBOS_GETLOG">bos getlog</A>
<P><A HREF="auarf114.htm#HDRBOS_SALVAGE">bos salvage</A>
<P><A HREF="auarf232.htm#HDRSALVAGER">salvager</A>
<P><A HREF="auarf252.htm#HDRVOS_INTRO">vos</A>
<P><A HREF="auarf266.htm#HDRVOS_LISTVOL">vos listvol</A>
<P><A HREF="auarf265.htm#HDRVOS_LISTVLDB">vos listvldb</A>
<P><A HREF="auarf270.htm#HDRVOS_RELEASE">vos release</A>
<P><A HREF="auarf274.htm#HDRVOS_RESTORE">vos restore</A>
<P>
<HR><P ALIGN="center"> <A HREF="../index.htm"><IMG SRC="../books.gif" BORDER="0" ALT="[Return to Library]"></A> <A HREF="auarf002.htm#ToC"><IMG SRC="../toc.gif" BORDER="0" ALT="[Contents]"></A> <A HREF="auarf260.htm"><IMG SRC="../prev.gif" BORDER="0" ALT="[Previous Topic]"></A> <A HREF="#Top_Of_Page"><IMG SRC="../top.gif" BORDER="0" ALT="[Top of Topic]"></A> <A HREF="auarf262.htm"><IMG SRC="../next.gif" BORDER="0" ALT="[Next Topic]"></A> <A HREF="auarf284.htm#HDRINDEX"><IMG SRC="../index.gif" BORDER="0" ALT="[Index]"></A> <P> 
<!-- Begin Footer Records  ========================================== -->
<P><HR><B> 
<br>&#169; <A HREF="http://www.ibm.com/">IBM Corporation 2000.</A>  All Rights Reserved 
</B> 
<!-- End Footer Records  ============================================ -->
<A NAME="Bot_Of_Page"></A>
</BODY></HTML>
