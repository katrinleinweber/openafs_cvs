# Copyright 2000, International Business Machines Corporation and others.
# All Rights Reserved.
# 
# This software has been released under the terms of the IBM Public
# License.  For details, see the LICENSE file in the top-level source
# directory or online at http://www.openafs.org/dl/license10.html

# nmake Makefile for NT build of LWP. 

!include ..\config\NTMakefile.$(SYS_NAME)
!include ..\config\NTMakefile.version

LIBOBJS = lock.obj \
	  lwp_nt.obj \
	  iomgr.obj \
	  timer.obj\
	  fasttime.obj \
	  waitkey.obj \
	  threadname.obj \
	  AFS_component_version_number.obj

LIBFILE = $(DESTDIR)\lib\afslwp.lib

INCFILES = \
	$(DESTDIR)\include\lock.h \
	$(DESTDIR)\include\lwp.h \
	$(DESTDIR)\include\preempt.h \
	$(DESTDIR)\include\timer.h



install: $(LIBFILE) $(INCFILES)

install9x: install

$(LIBFILE): $(LIBOBJS)
	$(LIBARCH)

tests: rw.exe

rw.exe: rw.obj $(LIBFILE) $(DESTDIR)\lib\afs\afsutil.lib
	$(EXECONLINK)

clean::
	$(DEL) $(LIBFILE)
