diff -uNr afs-krb5.orig/src/configure.in afs-krb5/src/configure.in
--- afs-krb5.orig/src/configure.in	2005-04-14 16:06:15.597138000 -0400
+++ afs-krb5/src/configure.in	2005-04-14 16:06:44.201789856 -0400
@@ -143,7 +143,19 @@
 LIBS="$ac_save_LIBS"])
 if test "x$afs_cv_func_getDirPath" = "xyes"; then
 	AC_MSG_RESULT([Setting compilation parameters for AFS 3.5 and later])
-	AKLOG_EXTRA_OBJ=adderrtable.o
+	AC_MSG_CHECKING([for add_to_error_table])
+dnl
+dnl We may be using libcom_err from Kerberos (shared libraries), and
+dnl already have add_to_error_table
+dnl
+	AC_TRY_LINK_FUNC(add_to_error_table, have_adderr=yes, have_adderr=no)
+	if test $have_adderr != yes; then
+		AC_MSG_RESULT([no, adding adderrtable.o])
+		AKLOG_EXTRA_OBJ=adderrtable.o
+	else
+		AC_MSG_RESULT([yes])
+		AKLOG_EXTRA_OBJ=
+	fi
 else
 	AC_MSG_RESULT([Setting compilation parameters for pre-AFS 3.5])
 	AC_DEFINE(PRE_AFS35)
