inetd (AFS version)        AFS Commands     inetd (AFS version)


NAME

   inetd (AFS version) -- initialize Internet service daemon.


   /etc/inetd  [-d]  [<configfile>]

DESCRIPTION

   Functions  like  the  standard  UNIX  inetd  in  invoking an
   Internet service daemon (itself called "inetd") that handles
   remotely-issued  commands.    The AFS inetd enables users of
   the remote services it supports to access those services  as
   authenticated   AFS   users,  provided  that  the  supported
   services are also AFS versions capable of passing AFS tokens
   (authentication   information).      Examples  of  supported
   services are rcp and rsh.

   AFS inetd can service the  standard  UNIX  versions  of  the
   remote  services,  but  it  is  instead recommended that the
   standard UNIX version of inetd be run in parallel  with  the
   AFS  version.  Name the AFS version something like inetd.afs
   and use it to service requests from  AFS-modified  programs;
   use  standard  inetd  to service requests from standard UNIX
   programs.  This  separation  requires  using  two  different
   inetd.conf      files,      as      described     in     the
   REQUIREMENTS/RESTRICTIONS section.

REQUIREMENTS/RESTRICTIONS

   Several  configuration  changes  are  necessary  for   token
   passing  to  work  correctly  with the AFS version of inetd.
   There may be other UNIX-based requirements/restrictions  not
   mentioned   here;  consult  the  UNIX  manual  page.    (One
   important restriction is that there can be no blank lines in
   the configuration file other than at the end.)

   The  requirements/restrictions  include the following.  They
   assume that inetd.afs is running in parallel  with  standard
   inetd.

      - For  token  passing to work, the request must come
        from the AFS version of the remote  service  (such
        as  AFS rcp or AFS rsh).  If the remote service is
        the  standard  UNIX  version,  it  will  not  pass
        tokens.    The  issuer  of  the  remote command is
        authenticated only in the local UNIX file  system,
        not  with  AFS, so the AFS server processes in the
        local cell consider the issuer to be anonymous.

      - The machine's reboot configuration  file  (/etc/rc
        or equivalent) should be altered so that it starts
        both standard inetd and inetd.afs.

      - An AFS-specific inetd.conf  file,  perhaps  called
        inetd.conf.afs,   should   exist   alongside   the
        standard  one.    When   initializing   inetd.afs,
        specify  this  configuration  file rather than the
        standard one.

        Each line in the inetd.conf.afs file must  include



        an  additional  field,  fifth  from  the  left, to
        specify the identity under which the program is to
        run.   The normal choice is "root."  The following
        sample shows the only lines that should appear  in
        this file:

            ta-rauth stream tcp nowait root internal
            shell    stream tcp nowait root /usr/etc/r
            login    stream tcp nowait root /usr/etc/r

        Substitute   appropriate  values  for  the  binary
        locations and names on the shell and login  lines.
        Include  the login line only if the AFS version of
        login is also in use in the cell; otherwise, refer
        to  login  in the standard inetd.conf instead.  In
        addition, if the inetd.cond.afs file is used on  a
        machine  with  a  Sun  system type, change rshd to
        in.rshd and change rlogind.afs  to  in.rlogind.afs
        on the shell and login lines, respectively.

      - The   standard  inetd.conf  (referred  to  by  the
        standard inetd) should be altered: comment out the
        shell  line and, if the AFS version of login is in
        use in the cell, the login line.    References  to
        these  programs  appear in inetd.conf.afs instead.
        Retain the login line if AFS login  is  not  being
        used.    Alter  the  ftp  line to refer to the AFS
        version of ftpd, if it  was  substituted  for  the
        standard  version.   Do not insert the extra fifth
        column into standard inetd.conf  if  it  does  not
        already  appear  there.    See the EXAMPLE section
        below for an illustration.

      - The  following  two  lines  must  appear  in   the
        /etc/services  file  on  the machine running inetd
        (as well as on the machine running modified rcp or
        rsh).    On  NeXT  machines, this information must
        appear in the  NetInfo  database  rather  than  in
        /etc/services.

           auth 113/tcp authentication
           ta-rauth 601/tcp rauth

ARGUMENTS

   See the UNIX manual page for inetd.

EXAMPLE

   The  following  are  sample  inetd.conf.afs  and  inetd.conf
   files, appropriate for use  when  inetd.afs  is  running  in
   parallel  with standard inetd and AFS login is being used in
   the  cell.    Changes   to   standard   inetd.conf   include
   referencing   the   AFS  version  of  the  ftpd  binary  and
   commenting out shell and login.  The example inetd.conf does
   not  include  the  extra  fifth  column.    Do not use these
   examples without modifying them appropriately for the  local
   machine type or cell.



       # AFS version of Internet server configuration datab
       #(EXAMPLE ONLY)
       #
       ta-rauth stream tcp nowait root internal
       shell    stream tcp nowait root /usr/etc/rshd
       login    stream tcp nowait root /usr/etc/rlogind.afs



       # Standard version of Internet server configuration
       #(EXAMPLE ONLY)
       #
       ftp     stream  tcp     nowait  /etc/ftpd.afs   ftpd
       telnet  stream  tcp     nowait  /etc/telnetd    teln
       #shell  stream  tcp     nowait  /etc/rshd       rshd
       #login  stream  tcp     nowait  /etc/rlogind    rlog
       finger  stream  tcp     nowait  /usr/etc/fingd  fing
       uucp    stream  tcp     nowait  /etc/uucpd      uucp
       exec    stream  tcp     nowait  /etc/rexecd     rexe
       comsat  dgram   udp     wait    /etc/comsat     coms
       talk    dgram   udp     wait    /etc/talkd      talk
       ntalk   dgram   udp     wait    /usr/etc/ntalkd talk
       time    dgram   udp     wait    /etc/miscd      time

PRIVILEGE REQUIRED

   See the UNIX manual page for inetd.

MORE INFORMATION

   rcp (AFS version)

   rsh (AFS version)

   UNIX manual page for inetd
