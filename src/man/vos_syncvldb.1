vos syncvldb               AFS Commands            vos syncvldb


NAME

   vos  syncvldb -- synchronize VLDB entry with volume headers

                       at given site.


   vos syncvldb  -server <machine name>  [-partition <partition
   name>]       [-cell <cell name>]  [-noauth]  [-localauth]
   [-verbose]
   [-help]

ACCEPTABLE ABBREVIATIONS/ALIASES

   vos syncv  -s <machine name>  [-p <partition name>]  [-c
   <cell name>]
   [-n]  [-l]  [-v]  [-h]

DESCRIPTION

   Inspects the volumes  housed  on  the  file  server  machine
   indicated with -serverMEITHER all of the volumes OR only the
   volumes on the optionally specified -partition.   It  checks
   that  the  VLDB  properly  records every volume whose volume
   header is marked On-line.  In case  of  discrepancies,  this
   command  alters  VLDB  entries to reflect the true status of
   volumes on -server.  It has other side effects:

      - If it finds a Backup volume whose ReadWrite source
        no  longer exists at the same site, it removes the
        Backup.  The  VLDB  status  flag  for  the  Backup
        changes to invalid.  The issuer will have to issue
        the vos backup command to create a new  Backup  if
        desired.

      - The  VL  Server  keeps track of the next available
        volumeID number with  a  counter.    This  command
        changes the counter to the highest volumeID number
        found.

      - If it encounters multiple  ReadOnly  copies  of  a
        volume  at  the  same  site,  or  multiple  Backup
        copies, it removes all  but  the  newest  one  (as
        determined  by  the  Creation  Date  field  in the
        volume header) from that site.

   After running this command, execute vos syncserv, preferably
   on all file server machines in the cell.

ARGUMENTS

   -server         names  the file server machine from which to
                   compare    volumes    to    VLDB    entries.
                   Abbreviated  forms  of  machine names may be
                   allowed  depending  on  the  naming  service
                   available at the time the command is issued;
                   see page xii in the introductory About  This
                   Manual chapter.  -partition
                   names the partition from  which  to  compare
                   volumes to VLDB entries.  In addition to the
                   full /vicepx form of a partition name, three



                   shorter  forms  are acceptable; see page xii
                   in  the  introductory  About   This   Manual
                   chapter.

   -cell           specifies  the  cell  in  which  to  run the
                   command.  See section 8.3 in  the  Reference
                   Manual for more details.  -noauth
                   tells the Volume and Volume Location Servers
                   to  assign  the  identity  anonymous  to the
                   issuer.  See section 8.3  in  the  Reference
                   Manual for more details.  -localauth
                   constructs a server ticket using a key  from
                   /usr/afs/etc/KeyFile.    See  section 8.3 in
                   the  Reference  Manual  for  more   details.
                   -verbose
                   tells the Volume and Volume Location Servers
                   to  report  on  what  they are doing as they
                   execute the command.  See section 8.3 in the
                   Reference Manual for more details.  -help
                   prints the online help for this command.  Do
                   not  provide  any  other  arguments or flags
                   with this one.    See  section  8.3  in  the
                   Reference Manual for more details.

EXAMPLE

   The  following  makes  sure that the VLDB matches the volume
   headers found at sites on fs4.transarc.com.

   % vos syncvldb fs4.transarc.com

PRIVILEGE REQUIRED

   Issuer must be listed in /usr/afs/etc/UserList on -server.

MORE INFORMATION

   vos backup vos syncserv
