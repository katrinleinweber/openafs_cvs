vos examine                AFS Commands             vos examine


NAME

   vos examine -- show information from volume header and VLDB

                       about one volume.


   vos examine  -id <volume name or ID>  [-cell <cell name>]
   [-noauth]
   [-localauth]  [-verbose]  [-help]

ACCEPTABLE ABBREVIATIONS/ALIASES

   vos e  -i <volume name or ID>  [-c <cell name>]  [-n]  [-l]
   [-v]  [-h]

   vos volinfo -i <volume name or ID>  [-c <cell name>]  [-n]
   [-l]  [-v]  [-h]

DESCRIPTION

   Formats and displays information from both  the  VLDB  entry
   and the volume header for the indicated volume, which may be
   of any of the three types.

ARGUMENTS

   -id             specifies  either  the  complete   name   or
                   volumeID  number of the volume, which may be
                   ReadWrite, ReadOnly or Backup.

   -cell           specifies the  cell  in  which  to  run  the
                   command.    See section 8.3 in the Reference
                   Manual for more details.  -noauth
                   tells the Volume and Volume Location Servers
                   to assign  the  identity  anonymous  to  the
                   issuer.    See  section 8.3 in the Reference
                   Manual for more details.  -localauth
                   constructs  a server ticket using a key from
                   /usr/afs/etc/KeyFile.  See  section  8.3  in
                   the   Reference  Manual  for  more  details.
                   -verbose
                   tells the Volume and Volume Location Servers
                   to report on what they  are  doing  as  they
                   execute the command.  See section 8.3 in the
                   Reference Manual for more details.  -help
                   prints the online help for this command.  Do
                   not provide any  other  arguments  or  flags
                   with  this  one.    See  section  8.3 in the
                   Reference Manual for more details.

OUTPUT

   The first seven lines of the output  show  information  from
   the  volume  header,  and  the remaining lines come from the
   VLDB.  Sections 8.1 in the Reference  Manual  and  VOSHEADER
   provide  more  complete  explanations  of  these fields than
   appear here.

   The first line of the  output  shows  information  from  the
   volume header, in this order:



      - the volume's name.

      - its volumeID.

      - its  type  (RW  for ReadWrite, RO for ReadOnly, BK
        for Backup).

      - its size in kilobytes (so 1000 means a megabyte).

      - its status at the server.  The possible values are
        On-line,  Off-line and needs salvage, the meanings
        of which  section  8.2  in  the  Reference  Manual
        explains  in  full.    In short, On-line indicates
        that the volume is accessible, whereas  the  other
        two indicate a possible problem with the volume.

   The second line shows the volume's site (file server machine
   and partition).

   The  third  line  shows  the   Parent   (ReadWrite),   Clone
   (ReleaseClone  or  Backup)  and Backup volume IDs associated
   with this volume.  One should match the volumeID number that
   appears on the first line.

   The  fourth  line  shows the quota allotted to the ReadWrite
   copy of the volume, expressed in kilobyte blocks.

   The fifth line shows the creation date of this volume.    If
   the   volume  has  been  restored  with  backup diskrestore,
   backup  volrestore or vos restore, this is the restore time.

   The sixth line shows the update date when  the  contents  of
   this  volume last changed.  For ReadOnly and Backup volumes,
   this should match the creation date.

   The seventh line reports how many times the volume has  been
   accessed since the later of

      - 12:00 a.m. on the day the command is issued

      - the last time the volume changed location

   An  access  is  defined as a fetch or store operation on any
   file system object stored in the volume.

   Following a blank line,  information  from  the  VLDB  entry
   appears:

   If  the  VLDB  entry  is  locked, a LOCKED indicator appears
   alone on a line at the top of this part of the output.

   The volumeID numbers allocated to the  ReadWrite,  ReadOnly,
   Backup  versions of the volume, and the ReleaseClone version
   if it exists.  The first three types are also marked with  a
   status  flag  of  either  valid  or invalid.  The valid flag
   indicates that at least one copy  of  that  version  of  the
   volume  exists  at  an  actual site.  If the ReleaseClone ID
   appears here, then one or  more  OLD  or  NEW  flags  should
   appear on the site definition lines below.

   The  next  line  indicates  the  number  of  separate  sites



   (partition/file server machine pairs)  where  copies  exist.
   It  should  match the number of sites shown on the following
   line(s).

   Each of the remaining lines show where  the  ReadWrite  copy
   (and  by  implication, Backup) and each ReadOnly copy of the
   volume resides, specified by machine  name,  partition  name
   and  type  (RW  or RO).  The presence of NEW or OLD flags on
   these lines indicates a failed release; they  should  appear
   only if the ReleaseClone ID also appears above.

EXAMPLE

   The  following shows the output for the Transarc Corporation
   cell's volume called usr with two ReadOnly replication sites
   (this  volume is mounted at /afs/transarc.com/usr).  For the
   sake of illustration, the output shows the volume as locked.
   If it weren't, the LOCKED line would simply be missing.

       % vos examine usr
       usr             536870981 RW   3459 K On-line
            fs2.transarc.com /vicepb
            Parent 5360870981   Clone 536870982   Backup 536870
            MaxQuota      40000 K
            Creation    Mon Jun 12 15:22:06 1989
            Last Update Fri Jun 16 09:34:35 1989
            5719 accesses in the past day

               LOCKED
               readWriteID  536870981  valid
               readOnlyID   536870982  valid
               backUpID     536870983  invalid
           number of sites -> 3
           server fs1.transarc.com partition /vicepa RO Site
           server fs3.transarc.com partition /vicepa RO Site
           server fs2.transarc.com partition /vicepb RW Site

PRIVILEGE REQUIRED

   None.

MORE INFORMATION

   vos diskrestore               vos listvol                   

   vos listvldb   vos restore
