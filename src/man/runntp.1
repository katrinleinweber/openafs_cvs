runntp                     AFS Commands                  runntp


NAME

   runntp -- initialize Network Time Protocol Daemon.


   /usr/afs/bin/runntp  [-localclock]  [-precision <small
   negative integer>]
                                         +
   [-logfile <pathname>]  [<machine name> ]

DESCRIPTION

   Initializes  the  Network  Time  Protocol Daemon and related
   programs on the local  machine.    It  also  constructs  the
   ntp.conf configuration file.

   This  command  is  intended as a convenient interface to the
   standard ntpd  program,  to  be  used  on  AFS  file  server
   machines.

WARNING

   A cell in which the NTPD was running before the introduction
   of AFS does not need to use runntp.  It is an error  to  run
   two NTPDs on one machine.

   This  command  is  not  normally issued at the command shell
   prompt, but rather  placed  into  a  file  server  machine's
   /usr/afs/local/BosConfig with the bos create command.

   This  command does not use the syntax conventions of the AFS
   command suites, so the command  and  switch  names  must  be
   typed in full.

ARGUMENTS

   -localclock
             tells NTPD to use  the  local  machine's  internal
             clock  as a possible source of the correct time in
             case a network  partition  separates  the  machine
             from   the   specified  machine  name(s).    Cells
             connected to the Internet should not normally  use
             this  flag.    In  cells  that experience frequent
             separations  from  the   network   (voluntary   or
             otherwise),  it  should be used only on the system
             control machine.

   -precision
             specifies  the precision of the local clock.  This
             argument  is  not  normally  provided.    As  ntpd
             initializes,  it  determines  the precision of the
             local clock on  its  own.    If  the  argument  is
             provided, it should be a small integer preceded by
             a hyphen to show that it is negative.   The  value
             is  used  as  an exponent on the number 2, and the
             result interpreted as the frequency, in  fractions
             of  a  second,  at  which  the  local  clock  tics
             (advances).

             For example, a value of -6,  which  translates  to



              -6
             2    or 1/64, means that the local clock tics once
             every 1/64th of a second, or has  a  precision  of
             about   60  tics  per  second.    A  value  of  -7
             translates to about 100 tics per second.  A  value
             of -10 translates to about 1000 tics per second (a
             millisecond clock).

   -logfile  indicates the pathname of the  file  in  which  to
             store  log  output from NTPD.  Indicate a location
             on the file server machine's local  disk,  not  in
             AFS;     a     suitable    location    might    be
             /usr/afs/logs/ntp.log.       The    log    records
             information  about  which  machines are serving as
             time sources and peers, what adjustments have been
             made  to  reduce  drift,  and  so  on.  Use ntpd's
             debugging  mechanism  to  control  the  amount  of
             information   produced.     If  this  argument  is
             omitted, the information is discarded.

   machine name
             is  the  complete Internet-style host name of each
             machine the local machine should consult  for  the
             correct time.  Preferably the machines are outside
             the cell.

             In general, this argument is necessary only on the
             system  control  machine.  If the issuer omits it,
             then    the    local    machine    consults    its
             /usr/afs/etc/CellServDB file and uses the machines
             listed there as time sources.

             See the AFS  Installation  Guide  or  consult  AFS
             Product   Support   at   Transarc  for  advice  on
             selecting appropriate time sources.

PRIVILEGE REQUIRED

   Issuer must be listed in /usr/afs/etc/UserList to place this
   command  in  /usr/afs/local/BosConfig,  because  that is the
   privilege required to issue bos create.

MORE INFORMATION

   bos create

   UNIX manual page for ntp

   UNIX manual page for ntpd

   UNIX manual page for ntpdc
