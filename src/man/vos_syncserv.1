vos syncserv               AFS Commands            vos syncserv


NAME

   vos  syncserv -- synchronize  VLDB  entries  that mention a

                       given site with volume headers.


   vos syncserv  -server <machine name>  [-partition <partition
   name>]       [-cell <cell name>]  [-noauth]  [-localauth]
   [-verbose]
   [-help]

ACCEPTABLE ABBREVIATIONS/ALIASES

   vos syncs  -s <machine name>  [-p <partition name>]
   [-c <cell name>]  [-n]  [-l]  [-v]  [-h]

DESCRIPTION

   Finds and inspects the VLDB entries for volumes  (ReadWrite,
   ReadOnly  and  Backup)  residing  on the file server machine
   specified by -serverMEITHER all of the volumes OR  only  the
   volumes  on  the optionally specified -partition.  It checks
   that everything in the VLDB entry is correct, including  the
   reported  sites  of  all  copies  (even though that requires
   looking at volumes on servers other than  -server).    There
   are several possible changes it can make:

      - If  a  volume  header  is marked Off-line, but the
        corresponding  VLDB  entry  is  normal,  then  the
        volume is brought on-line. (Note that the Off-line
        flag does not indicate the volume is corrupted.)

      - If there are two  copies  of  a  given  volume  at
        different  sites,  both marked Off-line, the newer
        volume is brought on-line and  the  older  one  is
        deleted  from  its  site  and  the  VLDB.    (This
        situation  could  arise  if  the  execution  of  a
        vos move command were interrupted).

      - If a volume recorded in the VLDB does not exist at
        the  indicated  site,  then  the  VLDB  entry   is
        changed.  In the case of ReadWrite, Backup and the
        last site for ReadOnly, that  means  changing  the
        appropriate VLDB status flag to invalid.

   Run  this  command,  preferably on all file server machines,
   after vos syncvldb has been run on all file server machines.

ARGUMENTS

   -server         names the file server machine for  which  to
                   check  entries  in  the  VLDB.   Abbreviated
                   forms  of  machine  names  may  be   allowed
                   depending on the naming service available at
                   the time the command is issued; see page xii
                   in   the   introductory  About  This  Manual
                   chapter.  -partition
                   names  the partition for which to check VLDB
                   entries.  In addition to  the  full  /vicepx
                   form  of  a  partition  name,  three shorter



                   forms are acceptable; see page  xii  in  the
                   introductory   About  This  Manual  chapter.
                   -cell
                   specifies  the  cell  in  which  to  run the
                   command.  See section 8.3 in  the  Reference
                   Manual for more details.  -noauth
                   tells the Volume and Volume Location Servers
                   to  assign  the  identity  anonymous  to the
                   issuer.  See section 8.3  in  the  Reference
                   Manual for more details.  -localauth
                   constructs a server ticket using a key  from
                   /usr/afs/etc/KeyFile.    See  section 8.3 in
                   the  Reference  Manual  for  more   details.
                   -verbose
                   tells the Volume and Volume Location Servers
                   to  report  on  what  they are doing as they
                   execute the command.  See section 8.3 in the
                   Reference Manual for more details.  -help
                   prints the online help for this command.  Do
                   not  provide  any  other  arguments or flags
                   with this one.    See  section  8.3  in  the
                   Reference Manual for more details.

EXAMPLE

   The  following alters the VLDB entries of volumes whose site
   definitions mention fs3.transarc.com  to  match  the  volume
   header.

   % vos syncserv fs3.transarc.com

PRIVILEGE REQUIRED

   Issuer must be listed in /usr/afs/etc/UserList on -server.

MORE INFORMATION

   vos move vos syncvldb
